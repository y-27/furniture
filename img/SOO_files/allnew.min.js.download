$(".menu > ul > li.menu-show ").hover(function (e) {
    $(this).addClass("menu-hover"), $(".menu-overlay").addClass("overlay"), $("body").addClass("fixed"), e.preventDefault()
}, function (e) {
    $(this).removeClass("menu-hover"), $(".menu-overlay").removeClass("overlay"), $("body").removeClass("fixed"), e.preventDefault()
});
var autoComplete = function (e) {
    if (document.querySelector) {
        var t = {
            selector: 0,
            source: 0,
            minChars: 3,
            delay: 150,
            offsetLeft: 0,
            offsetTop: 1,
            cache: 1,
            menuClass: "",
            renderItem: function (e, t) {
                t = t.replace(/[-\/\\^$*+?.()|[\]{}]/g, "\\$&");
                var o = new RegExp("(" + t.split(" ").join("|") + ")", "gi");
                return '<div class="autocomplete-suggestion" data-val="' + e + '">' + e.replace(o, "<b>$1</b>") + "</div>"
            },
            onSelect: function (e, t, o) { }
        };
        for (var o in e) e.hasOwnProperty(o) && (t[o] = e[o]);
        for (var n = "object" == typeof t.selector ? [t.selector] : document.querySelectorAll(t.selector), a = 0; a < n.length; a++) {
            var i = n[a];
            i.sc = document.createElement("div"), i.sc.className = "autocomplete-suggestions " + t.menuClass, i.autocompleteAttr = i.getAttribute("autocomplete"), i.setAttribute("autocomplete", "off"), i.cache = {}, i.last_val = "", i.updateSC = function (e, o) {
                var n = i.getBoundingClientRect();
                if (i.sc.style.left = Math.round(n.left + (window.pageXOffset || document.documentElement.scrollLeft) + t.offsetLeft) + "px", i.sc.style.top = Math.round(n.bottom + (window.pageYOffset || document.documentElement.scrollTop) + t.offsetTop) + "px", i.sc.style.width = Math.round(n.right - n.left) + "px", !e && (i.sc.style.display = "block", i.sc.maxHeight || (i.sc.maxHeight = parseInt((window.getComputedStyle ? getComputedStyle(i.sc, null) : i.sc.currentStyle).maxHeight)), i.sc.suggestionHeight || (i.sc.suggestionHeight = i.sc.querySelector(".autocomplete-suggestion").offsetHeight), i.sc.suggestionHeight))
                    if (o) {
                        var a = i.sc.scrollTop,
                            r = o.getBoundingClientRect().top - i.sc.getBoundingClientRect().top;
                        r + i.sc.suggestionHeight - i.sc.maxHeight > 0 ? i.sc.scrollTop = r + i.sc.suggestionHeight + a - i.sc.maxHeight : r < 0 && (i.sc.scrollTop = r + a)
                    } else i.sc.scrollTop = 0
            }, s(window, "resize", i.updateSC), document.body.appendChild(i.sc), d("autocomplete-suggestion", "mouseleave", function (e) {
                var t = i.sc.querySelector(".autocomplete-suggestion.selected");
                t && setTimeout(function () {
                    t.className = t.className.replace("selected", "")
                }, 20)
            }, i.sc), d("autocomplete-suggestion", "mouseover", function (e) {
                var t = i.sc.querySelector(".autocomplete-suggestion.selected");
                t && (t.className = t.className.replace("selected", "")), this.className += " selected"
            }, i.sc), d("autocomplete-suggestion", "mousedown", function (e) {
                if (l(this, "autocomplete-suggestion")) {
                    var o = this.getAttribute("data-val");
                    i.value = o, t.onSelect(e, o, this), i.sc.style.display = "none"
                }
            }, i.sc), i.blurHandler = function () {
                try {
                    var e = document.querySelector(".autocomplete-suggestions:hover")
                } catch (t) {
                    e = 0
                }
                e ? i !== document.activeElement && setTimeout(function () {
                    i.focus()
                }, 20) : (i.last_val = i.value, i.sc.style.display = "none", setTimeout(function () {
                    i.sc.style.display = "none"
                }, 350))
            }, s(i, "blur", i.blurHandler);
            var r = function (e) {
                var o = i.value;
                if (i.cache[o] = e, e.length && o.length >= t.minChars) {
                    for (var n = "", a = 0; a < e.length; a++) n += t.renderItem(e[a], o);
                    i.sc.innerHTML = n, i.updateSC(0)
                } else i.sc.style.display = "none"
            };
            i.keydownHandler = function (e) {
                var o, n = window.event ? e.keyCode : e.which;
                if ((40 == n || 38 == n) && i.sc.innerHTML) return (a = i.sc.querySelector(".autocomplete-suggestion.selected")) ? (o = 40 == n ? a.nextSibling : a.previousSibling) ? (a.className = a.className.replace("selected", ""), o.className += " selected", i.value = o.getAttribute("data-val")) : (a.className = a.className.replace("selected", ""), i.value = i.last_val, o = 0) : ((o = 40 == n ? i.sc.querySelector(".autocomplete-suggestion") : i.sc.childNodes[i.sc.childNodes.length - 1]).className += " selected", i.value = o.getAttribute("data-val")), i.updateSC(0, o), !1;
                if (27 == n) i.value = i.last_val, i.sc.style.display = "none";
                else if (13 == n || 9 == n) {
                    var a;
                    (a = i.sc.querySelector(".autocomplete-suggestion.selected")) && "none" != i.sc.style.display && (t.onSelect(e, a.getAttribute("data-val"), a), setTimeout(function () {
                        i.sc.style.display = "none"
                    }, 20))
                }
            }, s(i, "keydown", i.keydownHandler), i.keyupHandler = function (e) {
                var o = window.event ? e.keyCode : e.which;
                if (!o || (o < 35 || o > 40) && 13 != o && 27 != o) {
                    var n = i.value;
                    if (n.length >= t.minChars) {
                        if (n != i.last_val) {
                            if (i.last_val = n, clearTimeout(i.timer), t.cache) {
                                if (n in i.cache) return void r(i.cache[n]);
                                for (var a = 1; a < n.length - t.minChars; a++) {
                                    var l = n.slice(0, n.length - a);
                                    if (l in i.cache && !i.cache[l].length) return void r([])
                                }
                            }
                            i.timer = setTimeout(function () {
                                t.source(n, r)
                            }, t.delay)
                        }
                    } else i.last_val = n, i.sc.style.display = "none"
                }
            }, s(i, "keyup", i.keyupHandler), i.focusHandler = function (e) {
                i.last_val = "\n", i.keyupHandler(e)
            }, t.minChars || s(i, "focus", i.focusHandler)
        }
        this.destroy = function () {
            for (var e = 0; e < n.length; e++) {
                var t = n[e];
                c(window, "resize", t.updateSC), c(t, "blur", t.blurHandler), c(t, "focus", t.focusHandler), c(t, "keydown", t.keydownHandler), c(t, "keyup", t.keyupHandler), t.autocompleteAttr ? t.setAttribute("autocomplete", t.autocompleteAttr) : t.removeAttribute("autocomplete"), document.body.removeChild(t.sc), t = null
            }
        }
    }

    function l(e, t) {
        return e.classList ? e.classList.contains(t) : new RegExp("\\b" + t + "\\b").test(e.className)
    }

    function s(e, t, o) {
        e.attachEvent ? e.attachEvent("on" + t, o) : e.addEventListener(t, o)
    }

    function c(e, t, o) {
        e.detachEvent ? e.detachEvent("on" + t, o) : e.removeEventListener(t, o)
    }

    function d(e, t, o, n) {
        s(n || document, t, function (t) {
            for (var n, a = t.target || t.srcElement; a && !(n = l(a, e));) a = a.parentElement;
            n && o.call(a, t)
        })
    }
};
"function" == typeof define && define.amd ? define("autoComplete", function () {
    return autoComplete
}) : "undefined" != typeof module && module.exports ? module.exports = autoComplete : window.autoComplete = autoComplete,
    function (e) {
        var t = {
            type: "html",
            content: "",
            url: "",
            ajax: {},
            ajax_request: null,
            closeOnEsc: !0,
            closeOnOverlayClick: !0,
            clone: !1,
            overlay: {
                block: void 0,
                tpl: '<div class="swpmodal-overlay"></div>',
                css: {
                    backgroundColor: "#000",
                    opacity: .6
                }
            },
            container: {
                block: void 0,
                tpl: '<div class="swpmodal-container"><table class="swpmodal-container_i"><tr><td class="swpmodal-container_i2"></td></tr></table></div>'
            },
            wrap: void 0,
            body: void 0,
            errors: {
                tpl: '<div class="swpmodal-error swpmodal-close"></div>',
                autoclose_delay: 2e3,
                ajax_unsuccessful_load: "Error"
            },
            openEffect: {
                type: "fade",
                speed: 400
            },
            closeEffect: {
                type: "fade",
                speed: 400
            },
            beforeOpen: e.noop,
            afterOpen: e.noop,
            beforeClose: e.noop,
            afterClose: e.noop,
            afterLoading: e.noop,
            afterLoadingOnShow: e.noop,
            errorLoading: e.noop
        },
            o = 0,
            n = e([]),
            a = {
                getParentEl: function (t) {
                    var o = e(t);
                    return o.data("swpmodal") ? o : (o = e(t).closest(".swpmodal-container").data("swpmodalParentEl")) || !1
                },
                transition: function (t, o, n, a) {
                    switch (a = null == a ? e.noop : a, n.type) {
                        case "fade":
                            "show" == o ? t.fadeIn(n.speed, a) : t.fadeOut(n.speed, a);
                            break;
                        case "none":
                            "show" == o ? t.show() : t.hide(), a()
                    }
                },
                prepare_body: function (t, o) {
                    e(".swpmodal-close", t.body).unbind("click.swpmodal").bind("click.swpmodal", function () {
                        return o.swpmodal("close"), !1
                    })
                },
                init_el: function (t, r) {
                    var l = t.data("swpmodal");
                    if (!l) {
                        if (o++, (l = r).modalID = o, l.overlay.block = e(l.overlay.tpl), l.overlay.block.css(l.overlay.css), l.container.block = e(l.container.tpl), l.body = e(".swpmodal-container_i2", l.container.block), r.clone ? l.body.html(t.clone(!0)) : (t.before('<div id="swpmodalReserve' + l.modalID + '" style="display: none" />'), l.body.html(t)), a.prepare_body(l, t), l.closeOnOverlayClick && l.overlay.block.add(l.container.block).click(function (o) {
                            (function (t, o) {
                                var n = !0;
                                return e(t).each(function () {
                                    e(o.target).get(0) == e(this).get(0) && (n = !1), 0 == e(o.target).closest("HTML", e(this).get(0)).length && (n = !1)
                                }), n
                            })(e(">*", l.body), o) && t.swpmodal("close")
                        }), l.container.block.data("swpmodalParentEl", t), t.data("swpmodal", l), n = e.merge(n, t), e.proxy(i.show, t)(), "html" == l.type) return t;
                        if (null != l.ajax.beforeSend) {
                            var s = l.ajax.beforeSend;
                            delete l.ajax.beforeSend
                        }
                        if (null != l.ajax.success) {
                            var c = l.ajax.success;
                            delete l.ajax.success
                        }
                        if (null != l.ajax.error) {
                            var d = l.ajax.error;
                            delete l.ajax.error
                        }
                        var u = e.extend(!0, {
                            url: l.url,
                            beforeSend: function () {
                                l.body.html('<div class="swpmodal-loading" />'), void 0 !== s && s(l, t)
                            },
                            success: function (e) {
                                t.trigger("afterLoading"), e = l.afterLoading(l, t, e) || e, null == c ? l.body.html(e) : c(l, t, e), a.prepare_body(l, t), t.trigger("afterLoadingOnShow"), l.afterLoadingOnShow(l, t, e)
                            },
                            error: function () {
                                t.trigger("errorLoading"), l.errorLoading(l, t), null == d ? (l.body.html(l.errors.tpl), e(".swpmodal-error", l.body).html(l.errors.ajax_unsuccessful_load), e(".swpmodal-close", l.body).click(function () {
                                    return t.swpmodal("close"), !1
                                }), l.errors.autoclose_delay && setTimeout(function () {
                                    t.swpmodal("close")
                                }, l.errors.autoclose_delay)) : d(l, t)
                            }
                        }, l.ajax);
                        l.ajax_request = e.ajax(u), t.data("swpmodal", l)
                    }
                },
                init: function (o) {
                    if (o = e.extend(!0, {}, t, o), !e.isFunction(this)) return this.each(function () {
                        a.init_el(e(this), e.extend(!0, {}, o))
                    });
                    if (null != o)
                        if ("" != o.type) switch (o.type) {
                            case "html":
                                if ("" == o.content) return void e.error('jquery.swpmodal: Don\'t set parameter "content"');
                                var n = o.content;
                                return o.content = "", a.init_el(e(n), o);
                            case "ajax":
                                return "" == o.url ? void e.error('jquery.swpmodal: Don\'t set parameter "url"') : a.init_el(e("<div />"), o)
                        } else e.error('jquery.swpmodal: Don\'t set parameter "type"');
                    else e.error("jquery.swpmodal: Uncorrect parameters")
                }
            },
            i = {
                show: function () {
                    var t = a.getParentEl(this);
                    if (!1 !== t) {
                        var o = t.data("swpmodal");
                        if (o.overlay.block.hide(), o.container.block.hide(), e("BODY").append(o.overlay.block), e("BODY").append(o.container.block), o.beforeOpen(o, t), t.trigger("beforeOpen"), "hidden" != o.wrap.css("overflow")) {
                            o.wrap.data("swpmodalOverflow", o.wrap.css("overflow"));
                            var i = o.wrap.outerWidth(!0);
                            o.wrap.css("overflow", "hidden");
                            var r = o.wrap.outerWidth(!0);
                            r != i && o.wrap.css("marginRight", r - i + "px")
                        }
                        return n.not(t).each(function () {
                            e(this).data("swpmodal").overlay.block.hide()
                        }), a.transition(o.overlay.block, "show", n.length > 1 ? {
                            type: "none"
                        } : o.openEffect), a.transition(o.container.block, "show", n.length > 1 ? {
                            type: "none"
                        } : o.openEffect, function () {
                            o.afterOpen(o, t), t.trigger("afterOpen")
                        }), t
                    }
                    e.error("jquery.swpmodal: Uncorrect call")
                },
                close: function () {
                    if (!e.isFunction(this)) return this.each(function () {
                        var t = a.getParentEl(this);
                        if (!1 !== t) {
                            var o = t.data("swpmodal");
                            !1 !== o.beforeClose(o, t) && (t.trigger("beforeClose"), n.not(t).last().each(function () {
                                e(this).data("swpmodal").overlay.block.show()
                            }), a.transition(o.overlay.block, "hide", n.length > 1 ? {
                                type: "none"
                            } : o.closeEffect), a.transition(o.container.block, "hide", n.length > 1 ? {
                                type: "none"
                            } : o.closeEffect, function () {
                                o.afterClose(o, t), t.trigger("afterClose"), o.clone || e("#swpmodalReserve" + o.modalID).replaceWith(o.body.find(">*")), o.overlay.block.remove(), o.container.block.remove(), t.data("swpmodal", null), e(".swpmodal-container").length || (o.wrap.data("swpmodalOverflow") && o.wrap.css("overflow", o.wrap.data("swpmodalOverflow")), o.wrap.css("marginRight", 0))
                            }), "ajax" == o.type && o.ajax_request.abort(), n = n.not(t))
                        } else e.error("jquery.swpmodal: Uncorrect call")
                    });
                    n.each(function () {
                        e(this).swpmodal("close")
                    })
                },
                setDefault: function (o) {
                    e.extend(!0, t, o)
                }
            };
        e(function () {
            t.wrap = e(document.all && !document.querySelector ? "html" : "body")
        }), e(document).bind("keyup.swpmodal", function (e) {
            var t = n.last();
            t.length && t.data("swpmodal").closeOnEsc && 27 === e.keyCode && t.swpmodal("close")
        }), e.swpmodal = e.fn.swpmodal = function (t) {
            return i[t] ? i[t].apply(this, Array.prototype.slice.call(arguments, 1)) : "object" != typeof t && t ? void e.error("jquery.swpmodal: Method " + t + " does not exist") : a.init.apply(this, arguments)
        }
    }(jQuery);
var thanksHTML = '<div id="thanksMsgCommon" style="display:none"><div class="thanku-success-msg"><div id="commonThClose" class="swpmodal-close">x</div><img src="images/tick.gif"><span>Thank you!</span><p>for showing your interest in Woodenstreet.</span><a href="javascript:;" onclick="$(\'#commonThClose\').click()">Continue Shopping</a></p></div></div>',
    lock = "",
    tempStr = "",
    clearTime = null;

function checkSearch(e) {
    var url = $('#searchCat .selected a').attr('href');
    if (url) {
        location = url;
    } else {
        var t = $("base").attr("href") + "search",
            o = $("#search-user1").val();
        if (!o) return !1;
        t += "&search=" + encodeURIComponent(o), location = t
    }
}

function showLoginPopup(e) {
    showSingupPopup(e, "", "login")
}

function showSingupPopup(e, t, o, n) {
    $.ajax({
        url: "index.php?route=account/register_popup/index&cookie_modal=" + e + "&signup_type=" + n,
        type: "get",
        beforeSend: function () {
            $("#login-pop").append('<span class="wait" >&nbsp;<img src="catalog/view/theme/default/image/loading.gif" alt="" /></span>'), $(".wait").css({
                top: "45%",
                left: "45%",
                position: "absolute"
            })
        },
        complete: function () {
            $(".wait").remove()
        },
        success: function (n) {
            $("#login-pop").html(n), "" != t && $(".register_pagesource").val(t), checkCookieLoginPopup(e), "login" == o ? ($("#signup_popup_wrapper").hide(), $("#login_popup_wrapper").show()) : ("default" == o && $("#loginclose").attr("onclick", "window.location.reload();"), $("#signup_popup_wrapper").show(), $('#sideImage').attr('src', 'https://www.woodenstreet.com/images/login/login-bg1.jpg?b=7'), $("#login_popup_wrapper,#forgot_password_popup_wrapper").hide())
        }
    }), $("#social_login_wrap").show(), $("#login-pop").swpmodal({
        closeOnEsc: !1,
        closeOnOverlayClick: !1
    }), "" != t && $(".register_pagesource").val(t), checkCookieLoginPopup(e)
}

function reloadOnLoginPopupCookie() {
    $.cookie("small_modal_shown", "yes", {
        expires: 1,
        path: "/"
    }), location.reload()
}

function checkCookieLoginPopup(e) {
    "" != e ? ($("#login_close").click(function (e) {
        reloadOnLoginPopupCookie()
    }), $(document).mouseup(function (e) {
        $(e.target).hasClass("close") && reloadOnLoginPopupCookie()
    }), $(document).keyup(function (e) {
        27 == e.keyCode && reloadOnLoginPopupCookie()
    })) : $("#login_close").click(function (e) {
        $("#login-pop").swpmodal("close")
    })
}

function removeCookies() {
    return $.removeCookie("small_modal_shown", {
        path: "/"
    }), !0
}

function getURLParameter(e) {
    for (var t = window.location.search.substring(1).split("&"), o = 0; o < t.length; o++) {
        var n = t[o].split("=");
        if (n[0] == e) return n[1]
    }
    return null
}
$(document).ready(function () {
    $(".single-item").slick({
        slidesToShow: 1,
        slidesToScroll: 1
    }), $(window).scroll(function () {
        $(window).width() > 767 && ($(window).scrollTop() >= 160 ? $(".menu").addClass("fixed-header") : $(".menu").removeClass("fixed-header"))
    }), $(".small-fixed-popup .close-btn").click(function () {
        $(".small-fixed-popup").hide()
    }), $("#backtop").click(function () {
        return $("html, body").animate({
            scrollTop: 0
        }, 2e3), !1
    }), $(function () {
        var e = $("#backtop");
        $(window).scroll(function () {
            $(window).scrollTop() >= 700 ? e.removeClass("hide").addClass("show") : e.removeClass("show").addClass("hide")
        })
    }), $(".disocunt-strip .closebtn").click(function () {
        $(".disocunt-strip").slideUp(800)
    }), $(".request-call").click(function () {
        $(".reg-call").show(), $(".reqcall-mesaage").hide(), "" == $.trim($("#request-call-back").html()) ? $.ajax({
            url: "index.php?route=common/footer/getPopup",
            dataType: "html",
            beforeSend: function () {
                $(".request-call").css("pointer-events", "none")
            },
            success: function (e) {
                $(".request-call").css("pointer-events", ""), $("#request-call-back").html(e), $("#exampleModal-call").swpmodal({
                    closeOnEsc: !1,
                    closeOnOverlayClick: !1,
                    afterClose: function () {
                        $("#request-call-back .reg-call #reqTitle").text("Request a Callback")
                    }
                }), $("#request_type").val("callback")
            }
        }) : $("#exampleModal-call").swpmodal({
            closeOnEsc: !1,
            closeOnOverlayClick: !1
        }), $("#request_type").val("callback")
    })
}), $(function () {
    $(".my_account, .support-menu, .without-login").hover(function () {
        $(this).find(".sub, .support-dropdown , .without-login").slideToggle(400)
    }, function () {
        $(this).find(".sub, .support-dropdown, .without-login").hide()
    })
}), WinWidth = jQuery(window).width(), WinWidth <= 991 && jQuery(".my_account, .support-menu").click(function () {
    $(this).find(".my_account .sub, .support-menu .support-dropdown").toggle()
}), $(document).ready(function () {
    var e = $(".homeslide");
    e.slick({
        autoplay: !0,
        Speed: 1500,
        lazyLoad: "ondemand"
    }).slick("slickPause"), setTimeout(function () {
        e.slick("slickPlay")
    }, 6e3)
}), $(".sign_up_popup_btn_affiliate").click(function () {
    showSingupPopup("", "", "", "affiliate")
}), $(document).ready(function () {
    $("#login_popup_btn").click(function () {
        showLoginPopup("header Sign in click")
    }), $("#sign_up_popup_btn").click(function () {
        showSingupPopup("", "header Sign up click")
    })
}), $(".call-fixed").on("click", function (e) {
    $("body").addClass("no-scroll")
}), $(".success .close,.warning .close").click(function () {
    $(this).parent().remove()
}), $(document).ready(function () {
    $(window).width() < 767 && $("#boxes").hide()
}), document.setCookie = function (e, t) {
    var o = new Date;
    o.setTime(o.getTime() + 2592e6);
    var n = encodeURIComponent(e) + "=" + encodeURIComponent(t) + ";expires=" + o.toGMTString() + ";path=/";
    document.cookie = n
};
var source = getURLParameter("utm_source");
if (source) document.setCookie("source", source);
else {
    var Google_source = getURLParameter("gclid"),
        Fb_source = getURLParameter("fbclid");
    (Google_source || Fb_source) && (source = "Paid_ADS", document.setCookie("source", source))
}

function outOfStockSubmit(e) {
    var t = e.parent().find('input[type="email"]').val(),
        o = e.parent().find('input[type="tel"]').val(),
        n = e.parent().find('input[type="hidden"]').val();
    t ? o ? (e.parent().find('input[type="tel"]').removeClass("error"), $.ajax({
        type: "post",
        url: "index.php?route=product/category/outofstock",
        data: {
            email: t,
            mobile: o,
            product: n,
            devicetype: "desktop"
        }
    }).done(function () {
        e.parent().find("span").remove(), e.parent().find('input[type="hidden"]').before("<span>Thank you!</span>"), e.parent().find('input[type="email"]').val(""), e.parent().find('input[type="tel"]').val("")
    })) : (e.parent().find('input[type="email"]').removeClass("error"), e.parent().find('input[type="tel"]').addClass("error")) : e.parent().find('input[type="email"]').addClass("error")
}

function validation(checkKey, id) {
    var returnVal = 1;
    $('#' + id + ' input').css('border', '');
    $('[id^=' + id + '] input,[id^=' + id + '] textarea').each(
        function (index) {
            var input = $(this);
            var value = input.val().trim();
            var id = input.attr('name');
            input.parent('div').removeClass('has-error');
            $('.error-block').remove()

            var errorMessage = '';
            if (checkKey != 1 && id && input.attr('type') != 'hidden') {
                if (id == 'email' && !validate_email(value)) {
                    errorMessage = 'Please provide valid email';
                } else if ((id == 'name' || id == 'firstname' || id == 'lastname') && value == '') {
                    errorMessage = 'Please provide valid name';
                } else if ((id == 'mobile' || id == 'telephone' || id == 'phone') && value.length < 10) {
                    errorMessage = 'Please provide 10 digit mobile no.';
                } else if ((id == 'mobile' || id == 'telephone' || id == 'phone') && !validate_mobile(value)) {
                    errorMessage = 'Please provide valid mobile no.';
                } else if ((value == '' && id == 'postcode' || id == 'pincode') && value.length < 6) {
                    errorMessage = 'Please provide 6 digit pincode';
                } else if ((id == 'postcode' || id == 'pincode') && !validatePIN(value)) {
                    errorMessage = 'Please provide valid pincode';
                } else if (id == 'password' && value == '') {
                    errorMessage = 'Please provide valid password';
                } else if (value != '' && id == 'password' && value.length < 6) {
                    errorMessage = 'Please enter at least 6 characters password';
                } else if (value != '' && id == 'password' && value.length > 20) {
                    errorMessage = 'Password must be between 6 and 20 characters!';
                } else if (id == 'confirm' && value != $('#password').val()) {
                    errorMessage = 'Password and confirm password does not match';
                } else if (id == 'subject' && value == '') {
                    errorMessage = 'Please enter subject';
                } else if (id == 'file' && value == '') {
                    errorMessage = 'Please select file';
                } else if (id == 'city' && value == '') {
                    errorMessage = 'Please provide city name';
                } else if (id == 'country' && value == '') {
                    errorMessage = 'Please provide country name';
                } else if (id == 'message' && value == '') {
                    errorMessage = 'Please enter message';
                }
                else if (id == 'address_1' && value == '') {
                    errorMessage = 'Please provide House No';
                }
                else if (id == 'address_3' && value == '') {
                    errorMessage = 'Please provide Street Address';
                }
            }
            if (errorMessage) {
                returnVal = 0;
                if (errorMessage) {
                    if (id == 'file') {
                        input.parent().addClass('inpuT_ErrorData').css('border-bottom', '1px solid red').after(' <p class="error-block small">' + errorMessage + '</p>');
                    } else input.addClass('inpuT_ErrorData').css('border-bottom', '1px solid red').after(' <p class="error-block small">' + errorMessage + '</p>');
                }
                return false;
            }
        });
    return returnVal;
}
function validate_mobile(e) {
    var mob_first_digit = e.toString()[0];
    if (Number(mob_first_digit) < 6) {
        return false;
    }
    return true;
}
function validate_email(e) {

    if (/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)) {
        return (true)
    }
    return (false)
}

function validatePIN(pin) {
    if (pin.match(/^[1-9][0-9]{5}$/) && pin.length == 6) {
        return true
    }

    else {
        return false;
    }

}

function getFileExtension(e) {
    var t = /^.+\.([^.]+)$/.exec(e);
    return null == t ? "" : t[1]
}

function sendError(e, t) {
    return $(e).addClass("inpuT_ErrorData").css("border-bottom", "1px solid red").after(' <p class="error-block small">' + t + "</p>"), !1
}

function getPopup(e, t, o) {
    $(".btn").css("pointer-events", "none");
    var n = {
        tpl: t
    };
    $.post("index.php?route=product/product/getReviewForm", n, function (t) {
        "custom" == o && (t = t.replace('<img src=""', '<img src="images/custom/left-bg.jpg"')), $("#" + e).html("").html(t).show().swpmodal({
            closeOnEsc: !1,
            closeOnOverlayClick: !1,
            afterClose: function (t, o) {
                $("#" + e).hide()
            }
        }), $(".btn").css("pointer-events", ""), $("#AskCid1").val($("#AskCid").val()), $("#ajaxFilterCategory_id_get1").val($("#ajaxFilterCategory_id_get").val())
    })
}

function getTokHtml() {
    var e = getCookie("_sToken");
    $.ajaxSetup({
        headers: {
            token: e
        }
    }), $(".tokinput").remove(), $("<input type='hidden' class='tokinput' name='token' value='" + e + "'>").prependTo("form")
}

function getCookie(e) {
    for (var t = e + "=", o = document.cookie.split(";"), n = 0; n < o.length; n++) {
        for (var a = o[n];
            " " == a.charAt(0);) a = a.substring(1);
        if (0 == a.indexOf(t)) return a.substring(t.length, a.length)
    }
    return ""
}
$("body,html").on("input", ".field__input,.field__form input", function () {
    var e = $(this).closest(".field");
    this.value ? e.addClass("field--not-empty") : e.removeClass("field--not-empty")
}), $("input[name*='name'],#register_firstname").blur(function () {
    $(this).val($(this).val().toUpperCase())
}), $("body,html").on("input", "input[name*='name'],input[name*='city'],input[name*='firstname'],input[name*='lastname'],#register_firstname", function (e) {
    this.value = this.value.replace(/[^a-zA-Z ]/g, "").replace(/(\..*)\./g, "$1")
}), $("body,html").on("input", "input[name*='mobile'],input[name*='phone'],input[name*='postcode'],input[name*='pincode']", function (e) {
    this.value = this.value.replace(/[^0-9]/g, "").replace(/(\..*)\./g, "$1")
}), $(document).on("keyup", ".inpuT_ErrorData", function () {
    $(this).css("border-bottom", "").removeClass("inpuT_ErrorData"), $(".error-block").remove()
}), $(".notification, .mini-cart-overlay").click(function () {
    return $(this).hasClass("active") ? ($(this).removeClass("active"), $("body").removeClass("no-scroll"), $(".ws-mini-cart").animate({
        right: "-550px"
    })) : ($(".mini-cart-overlay").addClass("active"), $("body").addClass("no-scroll"), $(".ws-mini-cart").animate({
        right: "0"
    }), $.ajax({
        url: "index.php?route=common/header/getNotificationBar",
        type: "post",
        success: function (e) {
            $("#ws-mini-cart").html(e)
        }
    })), !1
}), $(document).ready(function () {
    getTokHtml(), $(document).ajaxStop(function () {
        getTokHtml()
    })
}), $("input#search-user").on("keypress", function (e) {
    var t = new RegExp("^[a-zA-Z0-9_ ]+$"),
        o = String.fromCharCode(e.charCode ? e.charCode : e.which);
    if (!t.test(o) && "&" != o && "-" != o) return e.preventDefault(), !1
});
var helpLinkTxt = helpLinks1 = "",
    recentHtml = "";
if (localStorage.getItem("recentSerach")) {
    $(".searchTitile2").text("RECENT SEARCHES"), helpLinkTxt = "RECENT SEARCHES";
    var searchArr = JSON.parse(localStorage.getItem("recentSerach"));
    for (key = 0; key < searchArr.length; key++)
        if (searchArr[key]) {
            const e = searchArr[key];
            helpLinks1 += '<a style="text-transform: capitalize;" href="index.php?route=product/search&search=' + e + '">' + e + "</a>";
            var spltd = searchArr[key].split("@");
            recentHtml += '<li><a href="' + spltd[1] + '">' + spltd[0] + "</a></li>", $(".resent-searchs").html("").html(recentHtml)
        }
}

var li, liSelected, searchVal = 0; var serachData = ''; var o = a = n = "";

function capitalize(word) {
    const arr = word.split(" ");
    for (var i = 0; i < arr.length; i++) {
        arr[i] = arr[i].charAt(0).toUpperCase() + arr[i].slice(1);
    }
    const str2 = arr.join(" ");
    return str2;
}

function searchresult(e, mainCategroy = 2) {

    var check = 0; var keyword = Array(); $('#searchCat').html('');
    var n = '';
    $('#search-user1,#search-user').attr('placeholder', '').val('');
    $('#search-user1').val(e.toLowerCase());
    check = (e.length > n.length) ? 0 : check;
    e = e.trim(), $("#searchRes1").hide(), $("#searchRes").show();
    var t = window.location.origin + "/";
    "http://localhost/" == t && (t = "http://localhost/woodennew/"), $("#noresult").hide();
    if (e.length > 2) {

        var r = new Date;
        search = encodeURIComponent(e.replace(
            /(^\s+|\s+$)|\s/g,
            function ($0, $1) {
                return $1 ? '' : '+';
            }
        ).toLowerCase());
        var conjuctionUrl = 'type=search&key=' + e.replace(/ /g,'-');
        var token = getCookie("_sToken");
        delete $.ajaxSettings.headers["token"];
        $.ajax({
            url: "https://osv1zhu7j1.execute-api.ap-southeast-1.amazonaws.com/development/search?q=" + search + "&&sort=_score%20desc%2Ctype%20asc&&q.options=%7Bfields%3A%5B%27product_name%27%2C%27keyword%27%5D%7D",
            type: 'get',
            dataType: 'json',
            success: function (response) {
                response = response.hits.hit;
                var len = response.length;
                var l = check = 0;
                n = e;
                var key = keyOpt = '';
                if (len > 0) {
                    
                    var li = "";
                    for (var i = 0; i < len; i++) {
                        var name = response[i]['fields']['product_name'];
                        var url = ((response[i]['fields']['url'] != '--none--') ? response[i]['fields']['url'] : 'search&search=' + name) + '?' + conjuctionUrl;
                        var type = response[i]['fields']['type'];
                        var options = response[i]['fields']['option'];
                        var id = response[i]['id'];
                        var indexofpro = id.startsWith('t00');
                        var indexofB = id.startsWith('tB0');
                        
                        // cat option 
                        if (type != 2 && response[i]['fields']['option'] && options.length > 0 && check < 3 ) {
                            
                            options = uniqueArr(options);
                            for (var j = 0; j < options.length; j++) {
                                var opt = response[i]['fields']['option'][j].split('_');
                                if(j==0 && opt[0].toLowerCase().startsWith(e.toLowerCase())){
                                    $('#search-user').attr('placeholder',opt[0].toLowerCase());
                                }

                                uniqueArr(keyword);
                                if (similarity(opt[0].toLowerCase(), e.toLowerCase()) >= 20 && $.inArray(opt[0].toLowerCase(), keyword) == -1) {
                                    if (opt[2] != undefined) {
                                        var key = ((opt[2].indexOf('?') == -1) ? opt[2] + '?' : opt[2] + '&' ) + conjuctionUrl;
                                    }else if(indexofB){
                                        //brand
                                        var key = 'brands/' + url ;
                                    }else {
                                        var key = 'search&search=' + opt[0] + '?' + conjuctionUrl;
                                    }
        
                                    li += '<li><a title="' + opt[0] + '" href="' + key +'">' + opt[0].toLowerCase().replace(n, "<b>" + n + "</b>") + "</a></li>";
                                    keyword.push(opt[0].toLowerCase());
                                    check++;;
                                }
                            }
                            if (check > 2) break;
                        }
                       
                        //product
                        if (type == 2 && check < 7 && $.inArray(name.toLowerCase(), keyword) == -1 && !indexofB) {
                            $('#search-user1').attr('placeholder','');
                            if(check ==0 && name.toLowerCase() != e.toLowerCase() ) {  
                                li += '<li><a title="' +e+ '" href="search&search=' + e +  '?' + conjuctionUrl + '"><b>' + e + "</b></a></li>";
                                keyword.push(e.toLowerCase());
                            }
                            li += '<li><a title="' + name + '" href="' + url + '">' + name.toLowerCase().replace(n, "<b>" + n + "</b>") + "</a></li>";
                            keyword.push(name.toLowerCase());
                            check++;
                        }
                    }
                } else if (check < 2) {
                  $('#search-user1').attr('placeholder','');
                    delete $.ajaxSettings.headers["token"];
                    var li = "";
                    $.ajax({

                        url: "https://2kdxqq67p6.execute-api.ap-southeast-1.amazonaws.com/development?q=" + encodeURIComponent(e) + "&suggester=auto&size=20",
                        type: 'get',
                        dataType: 'json',
                        success: function (response) {
                            if (response) {
                                response = response.suggest.suggestions;
                                var len = response.length;
                                var k = l = 0;
                                n = e;
                                var key = prevName = '';
                                var keyOpt = true;
                                if (len > 0) {

                                    for (var i = 0; i < len; i++) {
                                        var name = response[i]['suggestion'];
                                        var id = response[i]['id'];
                                        var indexof = id.indexOf('t00') == -1; 

                                        // product Name 
                                        if ($.inArray(name.toLowerCase(), keyword) == -1 && indexof ) {
                                            
                                            var url = 'search&search=' + name + '?' + conjuctionUrl;
                                            
                                            li += '<li><a title="' + name + '" href="' + url + '">' + name.toLowerCase().replace(n, "<b>" + n + "</b>") + "</a></li>";
                                            keyword.push(name.toLowerCase());
                                            check++;
                                            if (check > 7) break;
                                        }
                                    }
                                } else {
                                    if ($('#searchCat li').length < 1) {
                                        $("#noresult").text('Sorry, no results for "' + e + '"').show();
                                    }
                                }
                            }
                            if (li) {
                                $(".treding,#noresult").hide()
                                $('#searchCat').html(li);
                            }
                        }
                    });
                }
                if (li) {
                    $(".treding,#noresult").hide()
                    $('#searchCat').html(li);
                }
            }
        });


        $.ajaxSettings.headers["token"] = token;
    } else {
        checkType = 1; $('#search-user1').attr('placeholder','Search Products, Colors & More ..');$('#search-user').val('').attr('placeholder','');
        $("#noresult").hide(), $(".treding").show(), $("#searchCat").html(li)
    }
}

function similarity(s1, s2) {
    var longer = s1;
    var shorter = s2;
    if (s1.length < s2.length) {
        longer = s2;
        shorter = s1;
    }
    var longerLength = longer.length;
    if (longerLength == 0) {
        return 1.0;
    }
    return parseInt(((longerLength - editDistance(longer, shorter)) / parseFloat(longerLength)) * 100);
}

function editDistance(s1, s2) {
    s1 = s1.toLowerCase();
    s2 = s2.toLowerCase();

    var costs = new Array();
    for (var i = 0; i <= s1.length; i++) {
        var lastValue = i;
        for (var j = 0; j <= s2.length; j++) {
            if (i == 0)
                costs[j] = j;
            else {
                if (j > 0) {
                    var newValue = costs[j - 1];
                    if (s1.charAt(i - 1) != s2.charAt(j - 1))
                        newValue = Math.min(Math.min(newValue, lastValue),
                            costs[j]) + 1;
                    costs[j - 1] = lastValue;
                    lastValue = newValue;
                }
            }
        }
        if (i > 0)
            costs[s2.length] = lastValue;
    }
    return costs[s2.length];
}

function uniqueArr(e) {
    return $.grep(e, function (t, o) {
        return o == $.inArray(t, e)
    })
}




$('#search-user1').keypress(function(event){
  var keycode = (event.keyCode ? event.keyCode : event.which);
  if(keycode == '13'){
    var s = $('#searchCat .selected a').attr('href');
  
    if(typeof s === "undefined"){
        s = $("#searchCat > li:first").find('a').attr("href")
    }
  
    if(typeof s === "undefined") return false;
    var e = [ $("#searchCat > li:first").find('a').text().trim() + "@" +    $("#searchCat > li:first").find('a').attr("href")];
    localStorage.getItem("recentSerach") && (e = e.concat(JSON.parse(localStorage.getItem("recentSerach")))),
     (e = uniqueArr(e)).length > 5 && e.pop(), localStorage.setItem("recentSerach", JSON.stringify(e))
      
    window.location.replace(s);

  }
});




var liSelected;
$(window).keydown(function (e) {

    var li = $('#searchCat').find('li');

    if (e.which === 40) {
        if (liSelected) {
            liSelected.removeClass('selected');
            next = liSelected.next();
            if (next.length > 0) {
                liSelected = next.addClass('selected');
            } else {
                liSelected = li.eq(0).addClass('selected');
            }
        } else {
            liSelected = li.eq(0).addClass('selected');
        }
    } else if (e.which === 38) {
        if (liSelected) {
            liSelected.removeClass('selected');
            next = liSelected.prev();
            if (next.length > 0) {
                liSelected = next.addClass('selected');
            } else {
                liSelected = li.last().addClass('selected');
            }
        } else {
            liSelected = li.last().addClass('selected');
        }
    }
});






$(window).keydown(function (e) {
    1 == searchVal && (13 === e.which && liSelected && window.location.replace($(".selected a").attr("href")), 40 === e.which ? liSelected ? (liSelected.removeClass("selected"), next = liSelected.next(), liSelected = next.length > 0 ? next.addClass("selected") : li.eq(0).addClass("selected")) : liSelected = li.eq(0).addClass("selected") : 38 === e.which && (liSelected ? (liSelected.removeClass("selected"), next = liSelected.prev(), liSelected = next.length > 0 ? next.addClass("selected") : li.last().addClass("selected")) : liSelected = li.last().addClass("selected")))
}), $(document).on("click", "#searchCat li a", function () {
    var e = [$(this).text().trim() + "@" + $(this).attr("href")];
    localStorage.getItem("recentSerach") && (e = e.concat(JSON.parse(localStorage.getItem("recentSerach")))), (e = uniqueArr(e)).length > 5 && e.pop(), localStorage.setItem("recentSerach", JSON.stringify(e))
}), $(document).on("click", ":not(.TopSuggestionBox)", function (e) {
    if (targetEle = e.target, $(e.target).parent().hasClass("flex") || $(e.target).hasClass("search-user") || $(e.target).parent().hasClass("rtn")) return !0;
    $("#searchRes").hide()
}),
    function (e) {
        "function" == typeof define && define.amd ? define(["jquery"], e) : "object" == typeof exports ? module.exports = e : e(jQuery)
    }(function (e) {
        function t(t) {
            var r = t || window.event,
                l = s.call(arguments, 1),
                c = 0,
                u = 0,
                p = 0,
                h = 0,
                f = 0,
                m = 0;
            if ((t = e.event.fix(r)).type = "mousewheel", "detail" in r && (p = -1 * r.detail), "wheelDelta" in r && (p = r.wheelDelta), "wheelDeltaY" in r && (p = r.wheelDeltaY), "wheelDeltaX" in r && (u = -1 * r.wheelDeltaX), "axis" in r && r.axis === r.HORIZONTAL_AXIS && (u = -1 * p, p = 0), c = 0 === p ? u : p, "deltaY" in r && (c = p = -1 * r.deltaY), "deltaX" in r && (u = r.deltaX, 0 === p && (c = -1 * u)), 0 !== p || 0 !== u) {
                if (1 === r.deltaMode) {
                    var g = e.data(this, "mousewheel-line-height");
                    c *= g, p *= g, u *= g
                } else if (2 === r.deltaMode) {
                    var v = e.data(this, "mousewheel-page-height");
                    c *= v, p *= v, u *= v
                }
                if (h = Math.max(Math.abs(p), Math.abs(u)), (!i || i > h) && (i = h, n(r, h) && (i /= 40)), n(r, h) && (c /= 40, u /= 40, p /= 40), c = Math[c >= 1 ? "floor" : "ceil"](c / i), u = Math[u >= 1 ? "floor" : "ceil"](u / i), p = Math[p >= 1 ? "floor" : "ceil"](p / i), d.settings.normalizeOffset && this.getBoundingClientRect) {
                    var w = this.getBoundingClientRect();
                    f = t.clientX - w.left, m = t.clientY - w.top
                }
                return t.deltaX = u, t.deltaY = p, t.deltaFactor = i, t.offsetX = f, t.offsetY = m, t.deltaMode = 0, l.unshift(t, c, u, p), a && clearTimeout(a), a = setTimeout(o, 200), (e.event.dispatch || e.event.handle).apply(this, l)
            }
        }

        function o() {
            i = null
        }

        function n(e, t) {
            return d.settings.adjustOldDeltas && "mousewheel" === e.type && t % 120 == 0
        }
        var a, i, r = ["wheel", "mousewheel", "DOMMouseScroll", "MozMousePixelScroll"],
            l = "onwheel" in document || document.documentMode >= 9 ? ["wheel"] : ["mousewheel", "DomMouseScroll", "MozMousePixelScroll"],
            s = Array.prototype.slice;
        if (e.event.fixHooks)
            for (var c = r.length; c;) e.event.fixHooks[r[--c]] = e.event.mouseHooks;
        var d = e.event.special.mousewheel = {
            version: "3.1.12",
            setup: function () {
                if (this.addEventListener)
                    for (var o = l.length; o;) this.addEventListener(l[--o], t, !1);
                else this.onmousewheel = t;
                e.data(this, "mousewheel-line-height", d.getLineHeight(this)), e.data(this, "mousewheel-page-height", d.getPageHeight(this))
            },
            teardown: function () {
                if (this.removeEventListener)
                    for (var o = l.length; o;) this.removeEventListener(l[--o], t, !1);
                else this.onmousewheel = null;
                e.removeData(this, "mousewheel-line-height"), e.removeData(this, "mousewheel-page-height")
            },
            getLineHeight: function (t) {
                var o = e(t),
                    n = o["offsetParent" in e.fn ? "offsetParent" : "parent"]();
                return n.length || (n = e("body")), parseInt(n.css("fontSize"), 10) || parseInt(o.css("fontSize"), 10) || 16
            },
            getPageHeight: function (t) {
                return e(t).height()
            },
            settings: {
                adjustOldDeltas: !0,
                normalizeOffset: !0
            }
        };
        e.fn.extend({
            mousewheel: function (e) {
                return e ? this.bind("mousewheel", e) : this.trigger("mousewheel")
            },
            unmousewheel: function (e) {
                return this.unbind("mousewheel", e)
            }
        })
    }),
    function (e) {
        "function" == typeof define && define.amd ? define(["jquery"], e) : "object" == typeof exports ? module.exports = e : e(jQuery)
    }(function (e) {
        function t(t) {
            var r = t || window.event,
                l = s.call(arguments, 1),
                c = 0,
                u = 0,
                p = 0,
                h = 0,
                f = 0,
                m = 0;
            if ((t = e.event.fix(r)).type = "mousewheel", "detail" in r && (p = -1 * r.detail), "wheelDelta" in r && (p = r.wheelDelta), "wheelDeltaY" in r && (p = r.wheelDeltaY), "wheelDeltaX" in r && (u = -1 * r.wheelDeltaX), "axis" in r && r.axis === r.HORIZONTAL_AXIS && (u = -1 * p, p = 0), c = 0 === p ? u : p, "deltaY" in r && (c = p = -1 * r.deltaY), "deltaX" in r && (u = r.deltaX, 0 === p && (c = -1 * u)), 0 !== p || 0 !== u) {
                if (1 === r.deltaMode) {
                    var g = e.data(this, "mousewheel-line-height");
                    c *= g, p *= g, u *= g
                } else if (2 === r.deltaMode) {
                    var v = e.data(this, "mousewheel-page-height");
                    c *= v, p *= v, u *= v
                }
                if (h = Math.max(Math.abs(p), Math.abs(u)), (!i || i > h) && (i = h, n(r, h) && (i /= 40)), n(r, h) && (c /= 40, u /= 40, p /= 40), c = Math[c >= 1 ? "floor" : "ceil"](c / i), u = Math[u >= 1 ? "floor" : "ceil"](u / i), p = Math[p >= 1 ? "floor" : "ceil"](p / i), d.settings.normalizeOffset && this.getBoundingClientRect) {
                    var w = this.getBoundingClientRect();
                    f = t.clientX - w.left, m = t.clientY - w.top
                }
                return t.deltaX = u, t.deltaY = p, t.deltaFactor = i, t.offsetX = f, t.offsetY = m, t.deltaMode = 0, l.unshift(t, c, u, p), a && clearTimeout(a), a = setTimeout(o, 200), (e.event.dispatch || e.event.handle).apply(this, l)
            }
        }

        function o() {
            i = null
        }

        function n(e, t) {
            return d.settings.adjustOldDeltas && "mousewheel" === e.type && t % 120 == 0
        }
        var a, i, r = ["wheel", "mousewheel", "DOMMouseScroll", "MozMousePixelScroll"],
            l = "onwheel" in document || document.documentMode >= 9 ? ["wheel"] : ["mousewheel", "DomMouseScroll", "MozMousePixelScroll"],
            s = Array.prototype.slice;
        if (e.event.fixHooks)
            for (var c = r.length; c;) e.event.fixHooks[r[--c]] = e.event.mouseHooks;
        var d = e.event.special.mousewheel = {
            version: "3.1.12",
            setup: function () {
                if (this.addEventListener)
                    for (var o = l.length; o;) this.addEventListener(l[--o], t, !1);
                else this.onmousewheel = t;
                e.data(this, "mousewheel-line-height", d.getLineHeight(this)), e.data(this, "mousewheel-page-height", d.getPageHeight(this))
            },
            teardown: function () {
                if (this.removeEventListener)
                    for (var o = l.length; o;) this.removeEventListener(l[--o], t, !1);
                else this.onmousewheel = null;
                e.removeData(this, "mousewheel-line-height"), e.removeData(this, "mousewheel-page-height")
            },
            getLineHeight: function (t) {
                var o = e(t),
                    n = o["offsetParent" in e.fn ? "offsetParent" : "parent"]();
                return n.length || (n = e("body")), parseInt(n.css("fontSize"), 10) || parseInt(o.css("fontSize"), 10) || 16
            },
            getPageHeight: function (t) {
                return e(t).height()
            },
            settings: {
                adjustOldDeltas: !0,
                normalizeOffset: !0
            }
        };
        e.fn.extend({
            mousewheel: function (e) {
                return e ? this.bind("mousewheel", e) : this.trigger("mousewheel")
            },
            unmousewheel: function (e) {
                return this.unbind("mousewheel", e)
            }
        })
    }),
    function (e) {
        "function" == typeof define && define.amd ? define(["jquery"], e) : "undefined" != typeof module && module.exports ? module.exports = e : e(jQuery, window, document)
    }(function (e) {
        var t, o, n;
        t = "function" == typeof define && define.amd, o = "undefined" != typeof module && module.exports, n = "https:" == document.location.protocol ? "https:" : "http:", t || (o ? require("jquery-mousewheel")(e) : e.event.special.mousewheel || e("head").append(decodeURI("%3Cscript src=" + n + "//cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.13/jquery.mousewheel.min.js%3E%3C/script%3E"))),
            function () {
                var t, o = "mCustomScrollbar",
                    n = "mCS",
                    a = ".mCustomScrollbar",
                    i = {
                        setTop: 0,
                        setLeft: 0,
                        axis: "y",
                        scrollbarPosition: "inside",
                        scrollInertia: 950,
                        autoDraggerLength: !0,
                        alwaysShowScrollbar: 0,
                        snapOffset: 0,
                        mouseWheel: {
                            enable: !0,
                            scrollAmount: "auto",
                            axis: "y",
                            deltaFactor: "auto",
                            disableOver: ["select", "option", "keygen", "datalist", "textarea"]
                        },
                        scrollButtons: {
                            scrollType: "stepless",
                            scrollAmount: "auto"
                        },
                        keyboard: {
                            enable: !0,
                            scrollType: "stepless",
                            scrollAmount: "auto"
                        },
                        contentTouchScroll: 25,
                        documentTouchScroll: !0,
                        advanced: {
                            autoScrollOnFocus: "input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",
                            updateOnContentResize: !0,
                            updateOnImageLoad: "auto",
                            autoUpdateTimeout: 60
                        },
                        theme: "light",
                        callbacks: {
                            onTotalScrollOffset: 0,
                            onTotalScrollBackOffset: 0,
                            alwaysTriggerOffsets: !0
                        }
                    },
                    r = 0,
                    l = {},
                    s = window.attachEvent && !window.addEventListener ? 1 : 0,
                    c = !1,
                    d = ["mCSB_dragger_onDrag", "mCSB_scrollTools_onDrag", "mCS_img_loaded", "mCS_disabled", "mCS_destroyed", "mCS_no_scrollbar", "mCS-autoHide", "mCS-dir-rtl", "mCS_no_scrollbar_y", "mCS_no_scrollbar_x", "mCS_y_hidden", "mCS_x_hidden", "mCSB_draggerContainer", "mCSB_buttonUp", "mCSB_buttonDown", "mCSB_buttonLeft", "mCSB_buttonRight"],
                    u = {
                        init: function (t) {
                            t = e.extend(!0, {}, i, t);
                            var o = p.call(this);
                            if (t.live) {
                                var s = t.liveSelector || this.selector || a,
                                    c = e(s);
                                if ("off" === t.live) return void f(s);
                                l[s] = setTimeout(function () {
                                    c.mCustomScrollbar(t), "once" === t.live && c.length && f(s)
                                }, 500)
                            } else f(s);
                            return t.setWidth = t.set_width ? t.set_width : t.setWidth, t.setHeight = t.set_height ? t.set_height : t.setHeight, t.axis = t.horizontalScroll ? "x" : m(t.axis), t.scrollInertia = t.scrollInertia > 0 && t.scrollInertia < 17 ? 17 : t.scrollInertia, "object" != typeof t.mouseWheel && 1 == t.mouseWheel && (t.mouseWheel = {
                                enable: !0,
                                scrollAmount: "auto",
                                axis: "y",
                                preventDefault: !1,
                                deltaFactor: "auto",
                                normalizeDelta: !1,
                                invert: !1
                            }), t.mouseWheel.scrollAmount = t.mouseWheelPixels ? t.mouseWheelPixels : t.mouseWheel.scrollAmount, t.mouseWheel.normalizeDelta = t.advanced.normalizeMouseWheelDelta ? t.advanced.normalizeMouseWheelDelta : t.mouseWheel.normalizeDelta, t.scrollButtons.scrollType = g(t.scrollButtons.scrollType), h(t), e(o).each(function () {
                                var o = e(this);
                                if (!o.data(n)) {
                                    o.data(n, {
                                        idx: ++r,
                                        opt: t,
                                        scrollRatio: {
                                            y: null,
                                            x: null
                                        },
                                        overflowed: null,
                                        contentReset: {
                                            y: null,
                                            x: null
                                        },
                                        bindEvents: !1,
                                        tweenRunning: !1,
                                        sequential: {},
                                        langDir: o.css("direction"),
                                        cbOffsets: null,
                                        trigger: null,
                                        poll: {
                                            size: {
                                                o: 0,
                                                n: 0
                                            },
                                            img: {
                                                o: 0,
                                                n: 0
                                            },
                                            change: {
                                                o: 0,
                                                n: 0
                                            }
                                        }
                                    });
                                    var a = o.data(n),
                                        i = a.opt,
                                        l = o.data("mcs-axis"),
                                        s = o.data("mcs-scrollbar-position"),
                                        c = o.data("mcs-theme");
                                    l && (i.axis = l), s && (i.scrollbarPosition = s), c && (i.theme = c, h(i)), v.call(this), a && i.callbacks.onCreate && "function" == typeof i.callbacks.onCreate && i.callbacks.onCreate.call(this), e("#mCSB_" + a.idx + "_container img:not(." + d[2] + ")").addClass(d[2]), u.update.call(null, o)
                                }
                            })
                        },
                        update: function (t, o) {
                            var a = t || p.call(this);
                            return e(a).each(function () {
                                var t = e(this);
                                if (t.data(n)) {
                                    var a = t.data(n),
                                        i = a.opt,
                                        r = e("#mCSB_" + a.idx + "_container"),
                                        l = e("#mCSB_" + a.idx),
                                        s = [e("#mCSB_" + a.idx + "_dragger_vertical"), e("#mCSB_" + a.idx + "_dragger_horizontal")];
                                    if (!r.length) return;
                                    a.tweenRunning && F(t), o && a && i.callbacks.onBeforeUpdate && "function" == typeof i.callbacks.onBeforeUpdate && i.callbacks.onBeforeUpdate.call(this), t.hasClass(d[3]) && t.removeClass(d[3]), t.hasClass(d[4]) && t.removeClass(d[4]), l.css("max-height", "none"), l.height() !== t.height() && l.css("max-height", t.height()), x.call(this), "y" === i.axis || i.advanced.autoExpandHorizontalScroll || r.css("width", w(r)), a.overflowed = S.call(this), B.call(this), i.autoDraggerLength && b.call(this), _.call(this), T.call(this);
                                    var c = [Math.abs(r[0].offsetTop), Math.abs(r[0].offsetLeft)];
                                    "x" !== i.axis && (a.overflowed[0] ? s[0].height() > s[0].parent().height() ? k.call(this) : (V(t, c[0].toString(), {
                                        dir: "y",
                                        dur: 0,
                                        overwrite: "none"
                                    }), a.contentReset.y = null) : (k.call(this), "y" === i.axis ? $.call(this) : "yx" === i.axis && a.overflowed[1] && V(t, c[1].toString(), {
                                        dir: "x",
                                        dur: 0,
                                        overwrite: "none"
                                    }))), "y" !== i.axis && (a.overflowed[1] ? s[1].width() > s[1].parent().width() ? k.call(this) : (V(t, c[1].toString(), {
                                        dir: "x",
                                        dur: 0,
                                        overwrite: "none"
                                    }), a.contentReset.x = null) : (k.call(this), "x" === i.axis ? $.call(this) : "yx" === i.axis && a.overflowed[0] && V(t, c[0].toString(), {
                                        dir: "y",
                                        dur: 0,
                                        overwrite: "none"
                                    }))), o && a && (2 === o && i.callbacks.onImageLoad && "function" == typeof i.callbacks.onImageLoad ? i.callbacks.onImageLoad.call(this) : 3 === o && i.callbacks.onSelectorChange && "function" == typeof i.callbacks.onSelectorChange ? i.callbacks.onSelectorChange.call(this) : i.callbacks.onUpdate && "function" == typeof i.callbacks.onUpdate && i.callbacks.onUpdate.call(this)), X.call(this)
                                }
                            })
                        },
                        scrollTo: function (t, o) {
                            if (void 0 !== t && null != t) {
                                var a = p.call(this);
                                return e(a).each(function () {
                                    var a = e(this);
                                    if (a.data(n)) {
                                        var i = a.data(n),
                                            r = i.opt,
                                            l = {
                                                trigger: "external",
                                                scrollInertia: r.scrollInertia,
                                                scrollEasing: "mcsEaseInOut",
                                                moveDragger: !1,
                                                timeout: 60,
                                                callbacks: !0,
                                                onStart: !0,
                                                onUpdate: !0,
                                                onComplete: !0
                                            },
                                            s = e.extend(!0, {}, l, o),
                                            c = N.call(this, t),
                                            d = s.scrollInertia > 0 && s.scrollInertia < 17 ? 17 : s.scrollInertia;
                                        c[0] = Y.call(this, c[0], "y"), c[1] = Y.call(this, c[1], "x"), s.moveDragger && (c[0] *= i.scrollRatio.y, c[1] *= i.scrollRatio.x), s.dur = ne() ? 0 : d, setTimeout(function () {
                                            null !== c[0] && void 0 !== c[0] && "x" !== r.axis && i.overflowed[0] && (s.dir = "y", s.overwrite = "all", V(a, c[0].toString(), s)), null !== c[1] && void 0 !== c[1] && "y" !== r.axis && i.overflowed[1] && (s.dir = "x", s.overwrite = "none", V(a, c[1].toString(), s))
                                        }, s.timeout)
                                    }
                                })
                            }
                        },
                        stop: function () {
                            var t = p.call(this);
                            return e(t).each(function () {
                                var t = e(this);
                                t.data(n) && F(t)
                            })
                        },
                        disable: function (t) {
                            var o = p.call(this);
                            return e(o).each(function () {
                                var o = e(this);
                                o.data(n) && (o.data(n), X.call(this, "remove"), $.call(this), t && k.call(this), B.call(this, !0), o.addClass(d[3]))
                            })
                        },
                        destroy: function () {
                            var t = p.call(this);
                            return e(t).each(function () {
                                var a = e(this);
                                if (a.data(n)) {
                                    var i = a.data(n),
                                        r = i.opt,
                                        l = e("#mCSB_" + i.idx),
                                        s = e("#mCSB_" + i.idx + "_container"),
                                        c = e(".mCSB_" + i.idx + "_scrollbar");
                                    r.live && f(r.liveSelector || e(t).selector), X.call(this, "remove"), $.call(this), k.call(this), a.removeData(n), G(this, "mcs"), c.remove(), s.find("img." + d[2]).removeClass(d[2]), l.replaceWith(s.contents()), a.removeClass(o + " _" + n + "_" + i.idx + " " + d[6] + " " + d[7] + " " + d[5] + " " + d[3]).addClass(d[4])
                                }
                            })
                        }
                    },
                    p = function () {
                        return "object" != typeof e(this) || e(this).length < 1 ? a : this
                    },
                    h = function (t) {
                        t.autoDraggerLength = !(e.inArray(t.theme, ["rounded", "rounded-dark", "rounded-dots", "rounded-dots-dark"]) > -1) && t.autoDraggerLength, t.autoExpandScrollbar = !(e.inArray(t.theme, ["rounded-dots", "rounded-dots-dark", "3d", "3d-dark", "3d-thick", "3d-thick-dark", "inset", "inset-dark", "inset-2", "inset-2-dark", "inset-3", "inset-3-dark"]) > -1) && t.autoExpandScrollbar, t.scrollButtons.enable = !(e.inArray(t.theme, ["minimal", "minimal-dark"]) > -1) && t.scrollButtons.enable, t.autoHideScrollbar = e.inArray(t.theme, ["minimal", "minimal-dark"]) > -1 || t.autoHideScrollbar, t.scrollbarPosition = e.inArray(t.theme, ["minimal", "minimal-dark"]) > -1 ? "outside" : t.scrollbarPosition
                    },
                    f = function (e) {
                        l[e] && (clearTimeout(l[e]), G(l, e))
                    },
                    m = function (e) {
                        return "yx" === e || "xy" === e || "auto" === e ? "yx" : "x" === e || "horizontal" === e ? "x" : "y"
                    },
                    g = function (e) {
                        return "stepped" === e || "pixels" === e || "step" === e || "click" === e ? "stepped" : "stepless"
                    },
                    v = function () {
                        var t = e(this),
                            a = t.data(n),
                            i = a.opt,
                            r = i.autoExpandScrollbar ? " " + d[1] + "_expand" : "",
                            l = ["<div id='mCSB_" + a.idx + "_scrollbar_vertical' class='mCSB_scrollTools mCSB_" + a.idx + "_scrollbar mCS-" + i.theme + " mCSB_scrollTools_vertical" + r + "'><div class='" + d[12] + "'><div id='mCSB_" + a.idx + "_dragger_vertical' class='mCSB_dragger' style='position:absolute;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>", "<div id='mCSB_" + a.idx + "_scrollbar_horizontal' class='mCSB_scrollTools mCSB_" + a.idx + "_scrollbar mCS-" + i.theme + " mCSB_scrollTools_horizontal" + r + "'><div class='" + d[12] + "'><div id='mCSB_" + a.idx + "_dragger_horizontal' class='mCSB_dragger' style='position:absolute;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>"],
                            s = "yx" === i.axis ? "mCSB_vertical_horizontal" : "x" === i.axis ? "mCSB_horizontal" : "mCSB_vertical",
                            c = "yx" === i.axis ? l[0] + l[1] : "x" === i.axis ? l[1] : l[0],
                            u = "yx" === i.axis ? "<div id='mCSB_" + a.idx + "_container_wrapper' class='mCSB_container_wrapper' />" : "",
                            p = i.autoHideScrollbar ? " " + d[6] : "",
                            h = "x" !== i.axis && "rtl" === a.langDir ? " " + d[7] : "";
                        i.setWidth && t.css("width", i.setWidth), i.setHeight && t.css("height", i.setHeight), i.setLeft = "y" !== i.axis && "rtl" === a.langDir ? "989999px" : i.setLeft, t.addClass(o + " _" + n + "_" + a.idx + p + h).wrapInner("<div id='mCSB_" + a.idx + "' class='mCustomScrollBox mCS-" + i.theme + " " + s + "'><div id='mCSB_" + a.idx + "_container' class='mCSB_container' style='position:relative; top:" + i.setTop + "; left:" + i.setLeft + ";' dir='" + a.langDir + "' /></div>");
                        var f = e("#mCSB_" + a.idx),
                            m = e("#mCSB_" + a.idx + "_container");
                        "y" === i.axis || i.advanced.autoExpandHorizontalScroll || m.css("width", w(m)), "outside" === i.scrollbarPosition ? ("static" === t.css("position") && t.css("position", "relative"), t.css("overflow", "visible"), f.addClass("mCSB_outside").after(c)) : (f.addClass("mCSB_inside").append(c), m.wrap(u)), y.call(this);
                        var g = [e("#mCSB_" + a.idx + "_dragger_vertical"), e("#mCSB_" + a.idx + "_dragger_horizontal")];
                        g[0].css("min-height", g[0].height()), g[1].css("min-width", g[1].width())
                    },
                    w = function (t) {
                        var o = [t[0].scrollWidth, Math.max.apply(Math, t.children().map(function () {
                            return e(this).outerWidth(!0)
                        }).get())],
                            n = t.parent().width();
                        return o[0] > n ? o[0] : o[1] > n ? o[1] : "100%"
                    },
                    x = function () {
                        var t = e(this).data(n),
                            o = t.opt,
                            a = e("#mCSB_" + t.idx + "_container");
                        if (o.advanced.autoExpandHorizontalScroll && "y" !== o.axis) {
                            a.css({
                                width: "auto",
                                "min-width": 0,
                                "overflow-x": "scroll"
                            });
                            var i = Math.ceil(a[0].scrollWidth);
                            3 === o.advanced.autoExpandHorizontalScroll || 2 !== o.advanced.autoExpandHorizontalScroll && i > a.parent().width() ? a.css({
                                width: i,
                                "min-width": "100%",
                                "overflow-x": "inherit"
                            }) : a.css({
                                "overflow-x": "inherit",
                                position: "absolute"
                            }).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({
                                width: Math.ceil(a[0].getBoundingClientRect().right + .4) - Math.floor(a[0].getBoundingClientRect().left),
                                "min-width": "100%",
                                position: "relative"
                            }).unwrap()
                        }
                    },
                    y = function () {
                        var t = e(this).data(n),
                            o = t.opt,
                            a = e(".mCSB_" + t.idx + "_scrollbar:first"),
                            i = te(o.scrollButtons.tabindex) ? "tabindex='" + o.scrollButtons.tabindex + "'" : "",
                            r = ["<a href='#' class='" + d[13] + "' " + i + " />", "<a href='#' class='" + d[14] + "' " + i + " />", "<a href='#' class='" + d[15] + "' " + i + " />", "<a href='#' class='" + d[16] + "' " + i + " />"],
                            l = ["x" === o.axis ? r[2] : r[0], "x" === o.axis ? r[3] : r[1], r[2], r[3]];
                        o.scrollButtons.enable && a.prepend(l[0]).append(l[1]).next(".mCSB_scrollTools").prepend(l[2]).append(l[3])
                    },
                    b = function () {
                        var t = e(this).data(n),
                            o = e("#mCSB_" + t.idx),
                            a = e("#mCSB_" + t.idx + "_container"),
                            i = [e("#mCSB_" + t.idx + "_dragger_vertical"), e("#mCSB_" + t.idx + "_dragger_horizontal")],
                            r = [o.height() / a.outerHeight(!1), o.width() / a.outerWidth(!1)],
                            l = [parseInt(i[0].css("min-height")), Math.round(r[0] * i[0].parent().height()), parseInt(i[1].css("min-width")), Math.round(r[1] * i[1].parent().width())],
                            c = s && l[1] < l[0] ? l[0] : l[1],
                            d = s && l[3] < l[2] ? l[2] : l[3];
                        i[0].css({
                            height: c,
                            "max-height": i[0].parent().height() - 10
                        }).find(".mCSB_dragger_bar").css({
                            "line-height": l[0] + "px"
                        }), i[1].css({
                            width: d,
                            "max-width": i[1].parent().width() - 10
                        })
                    },
                    _ = function () {
                        var t = e(this).data(n),
                            o = e("#mCSB_" + t.idx),
                            a = e("#mCSB_" + t.idx + "_container"),
                            i = [e("#mCSB_" + t.idx + "_dragger_vertical"), e("#mCSB_" + t.idx + "_dragger_horizontal")],
                            r = [a.outerHeight(!1) - o.height(), a.outerWidth(!1) - o.width()],
                            l = [r[0] / (i[0].parent().height() - i[0].height()), r[1] / (i[1].parent().width() - i[1].width())];
                        t.scrollRatio = {
                            y: l[0],
                            x: l[1]
                        }
                    },
                    C = function (e, t, o) {
                        var n = o ? d[0] + "_expanded" : "",
                            a = e.closest(".mCSB_scrollTools");
                        "active" === t ? (e.toggleClass(d[0] + " " + n), a.toggleClass(d[1]), e[0]._draggable = e[0]._draggable ? 0 : 1) : e[0]._draggable || ("hide" === t ? (e.removeClass(d[0]), a.removeClass(d[1])) : (e.addClass(d[0]), a.addClass(d[1])))
                    },
                    S = function () {
                        var t = e(this).data(n),
                            o = e("#mCSB_" + t.idx),
                            a = e("#mCSB_" + t.idx + "_container"),
                            i = null == t.overflowed ? a.height() : a.outerHeight(!1),
                            r = null == t.overflowed ? a.width() : a.outerWidth(!1),
                            l = a[0].scrollHeight,
                            s = a[0].scrollWidth;
                        return l > i && (i = l), s > r && (r = s), [i > o.height(), r > o.width()]
                    },
                    k = function () {
                        var t = e(this),
                            o = t.data(n),
                            a = o.opt,
                            i = e("#mCSB_" + o.idx),
                            r = e("#mCSB_" + o.idx + "_container"),
                            l = [e("#mCSB_" + o.idx + "_dragger_vertical"), e("#mCSB_" + o.idx + "_dragger_horizontal")];
                        if (F(t), ("x" !== a.axis && !o.overflowed[0] || "y" === a.axis && o.overflowed[0]) && (l[0].add(r).css("top", 0), V(t, "_resetY")), "y" !== a.axis && !o.overflowed[1] || "x" === a.axis && o.overflowed[1]) {
                            var s = dx = 0;
                            "rtl" === o.langDir && (s = i.width() - r.outerWidth(!1), dx = Math.abs(s / o.scrollRatio.x)), r.css("left", s), l[1].css("left", dx), V(t, "_resetX")
                        }
                    },
                    T = function () {
                        var t, o = e(this),
                            a = o.data(n),
                            i = a.opt;
                        a.bindEvents || (M.call(this), i.contentTouchScroll && E.call(this), L.call(this), i.mouseWheel.enable && function n() {
                            t = setTimeout(function () {
                                e.event.special.mousewheel ? (clearTimeout(t), D.call(o[0])) : n()
                            }, 100)
                        }(), A.call(this), z.call(this), i.advanced.autoScrollOnFocus && j.call(this), i.scrollButtons.enable && W.call(this), i.keyboard.enable && q.call(this), a.bindEvents = !0)
                    },
                    $ = function () {
                        var t = e(this),
                            o = t.data(n),
                            a = o.opt,
                            i = n + "_" + o.idx,
                            r = ".mCSB_" + o.idx + "_scrollbar",
                            l = e("#mCSB_" + o.idx + ",#mCSB_" + o.idx + "_container,#mCSB_" + o.idx + "_container_wrapper," + r + " ." + d[12] + ",#mCSB_" + o.idx + "_dragger_vertical,#mCSB_" + o.idx + "_dragger_horizontal," + r + ">a"),
                            s = e("#mCSB_" + o.idx + "_container");
                        a.advanced.releaseDraggableSelectors && l.add(e(a.advanced.releaseDraggableSelectors)), a.advanced.extraDraggableSelectors && l.add(e(a.advanced.extraDraggableSelectors)), o.bindEvents && (e(document).add(e(!I() || top.document)).unbind("." + i), l.each(function () {
                            e(this).unbind("." + i)
                        }), clearTimeout(t[0]._focusTimeout), G(t[0], "_focusTimeout"), clearTimeout(o.sequential.step), G(o.sequential, "step"), clearTimeout(s[0].onCompleteTimeout), G(s[0], "onCompleteTimeout"), o.bindEvents = !1)
                    },
                    B = function (t) {
                        var o = e(this),
                            a = o.data(n),
                            i = a.opt,
                            r = e("#mCSB_" + a.idx + "_container_wrapper"),
                            l = r.length ? r : e("#mCSB_" + a.idx + "_container"),
                            s = [e("#mCSB_" + a.idx + "_scrollbar_vertical"), e("#mCSB_" + a.idx + "_scrollbar_horizontal")],
                            c = [s[0].find(".mCSB_dragger"), s[1].find(".mCSB_dragger")];
                        "x" !== i.axis && (a.overflowed[0] && !t ? (s[0].add(c[0]).add(s[0].children("a")).css("display", "block"), l.removeClass(d[8] + " " + d[10])) : (i.alwaysShowScrollbar ? (2 !== i.alwaysShowScrollbar && c[0].css("display", "none"), l.removeClass(d[10])) : (s[0].css("display", "none"), l.addClass(d[10])), l.addClass(d[8]))), "y" !== i.axis && (a.overflowed[1] && !t ? (s[1].add(c[1]).add(s[1].children("a")).css("display", "block"), l.removeClass(d[9] + " " + d[11])) : (i.alwaysShowScrollbar ? (2 !== i.alwaysShowScrollbar && c[1].css("display", "none"), l.removeClass(d[11])) : (s[1].css("display", "none"), l.addClass(d[11])), l.addClass(d[9]))), a.overflowed[0] || a.overflowed[1] ? o.removeClass(d[5]) : o.addClass(d[5])
                    },
                    O = function (t) {
                        var o = t.type,
                            n = t.target.ownerDocument !== document && null !== frameElement ? [e(frameElement).offset().top, e(frameElement).offset().left] : null,
                            a = I() && t.target.ownerDocument !== top.document && null !== frameElement ? [e(t.view.frameElement).offset().top, e(t.view.frameElement).offset().left] : [0, 0];
                        switch (o) {
                            case "pointerdown":
                            case "MSPointerDown":
                            case "pointermove":
                            case "MSPointerMove":
                            case "pointerup":
                            case "MSPointerUp":
                                return n ? [t.originalEvent.pageY - n[0] + a[0], t.originalEvent.pageX - n[1] + a[1], !1] : [t.originalEvent.pageY, t.originalEvent.pageX, !1];
                            case "touchstart":
                            case "touchmove":
                            case "touchend":
                                var i = t.originalEvent.touches[0] || t.originalEvent.changedTouches[0],
                                    r = t.originalEvent.touches.length || t.originalEvent.changedTouches.length;
                                return t.target.ownerDocument !== document ? [i.screenY, i.screenX, r > 1] : [i.pageY, i.pageX, r > 1];
                            default:
                                return n ? [t.pageY - n[0] + a[0], t.pageX - n[1] + a[1], !1] : [t.pageY, t.pageX, !1]
                        }
                    },
                    M = function () {
                        function t(e, t, n, a) {
                            if (h[0].idleTimer = d.scrollInertia < 233 ? 250 : 0, o.attr("id") === p[1]) var i = "x",
                                s = (o[0].offsetLeft - t + a) * l.scrollRatio.x;
                            else i = "y", s = (o[0].offsetTop - e + n) * l.scrollRatio.y;
                            V(r, s.toString(), {
                                dir: i,
                                drag: !0
                            })
                        }
                        var o, a, i, r = e(this),
                            l = r.data(n),
                            d = l.opt,
                            u = n + "_" + l.idx,
                            p = ["mCSB_" + l.idx + "_dragger_vertical", "mCSB_" + l.idx + "_dragger_horizontal"],
                            h = e("#mCSB_" + l.idx + "_container"),
                            f = e("#" + p[0] + ",#" + p[1]),
                            m = d.advanced.releaseDraggableSelectors ? f.add(e(d.advanced.releaseDraggableSelectors)) : f,
                            g = d.advanced.extraDraggableSelectors ? e(!I() || top.document).add(e(d.advanced.extraDraggableSelectors)) : e(!I() || top.document);
                        f.bind("contextmenu." + u, function (e) {
                            e.preventDefault()
                        }).bind("mousedown." + u + " touchstart." + u + " pointerdown." + u + " MSPointerDown." + u, function (t) {
                            if (t.stopImmediatePropagation(), t.preventDefault(), K(t)) {
                                c = !0, s && (document.onselectstart = function () {
                                    return !1
                                }), H.call(h, !1), F(r);
                                var n = (o = e(this)).offset(),
                                    l = O(t)[0] - n.top,
                                    u = O(t)[1] - n.left,
                                    p = o.height() + n.top,
                                    f = o.width() + n.left;
                                p > l && l > 0 && f > u && u > 0 && (a = l, i = u), C(o, "active", d.autoExpandScrollbar)
                            }
                        }).bind("touchmove." + u, function (e) {
                            e.stopImmediatePropagation(), e.preventDefault();
                            var n = o.offset(),
                                r = O(e)[0] - n.top,
                                l = O(e)[1] - n.left;
                            t(a, i, r, l)
                        }), e(document).add(g).bind("mousemove." + u + " pointermove." + u + " MSPointerMove." + u, function (e) {
                            if (o) {
                                var n = o.offset(),
                                    r = O(e)[0] - n.top,
                                    l = O(e)[1] - n.left;
                                if (a === r && i === l) return;
                                t(a, i, r, l)
                            }
                        }).add(m).bind("mouseup." + u + " touchend." + u + " pointerup." + u + " MSPointerUp." + u, function () {
                            o && (C(o, "active", d.autoExpandScrollbar), o = null), c = !1, s && (document.onselectstart = null), H.call(h, !0)
                        })
                    },
                    E = function () {
                        function o(e) {
                            if (!ee(e) || c || O(e)[2]) t = 0;
                            else {
                                t = 1, _ = 0, C = 0, d = 1, S.removeClass("mCS_touch_action");
                                var o = M.offset();
                                u = O(e)[0] - o.top, p = O(e)[1] - o.left, R = [O(e)[0], O(e)[1]]
                            }
                        }

                        function a(e) {
                            if (ee(e) && !c && !O(e)[2] && (T.documentTouchScroll || e.preventDefault(), e.stopImmediatePropagation(), (!C || _) && d)) {
                                g = J();
                                var t = B.offset(),
                                    o = O(e)[0] - t.top,
                                    n = O(e)[1] - t.left,
                                    a = "mcsLinearOut";
                                if (L.push(o), D.push(n), R[2] = Math.abs(O(e)[0] - R[0]), R[3] = Math.abs(O(e)[1] - R[1]), k.overflowed[0]) var i = E[0].parent().height() - E[0].height(),
                                    r = u - o > 0 && o - u > -i * k.scrollRatio.y && (2 * R[3] < R[2] || "yx" === T.axis);
                                if (k.overflowed[1]) var l = E[1].parent().width() - E[1].width(),
                                    h = p - n > 0 && n - p > -l * k.scrollRatio.x && (2 * R[2] < R[3] || "yx" === T.axis);
                                r || h ? (z || e.preventDefault(), _ = 1) : (C = 1, S.addClass("mCS_touch_action")), z && e.preventDefault(), y = "yx" === T.axis ? [u - o, p - n] : "x" === T.axis ? [null, p - n] : [u - o, null], M[0].idleTimer = 250, k.overflowed[0] && s(y[0], P, a, "y", "all", !0), k.overflowed[1] && s(y[1], P, a, "x", H, !0)
                            }
                        }

                        function i(e) {
                            if (!ee(e) || c || O(e)[2]) t = 0;
                            else {
                                t = 1, e.stopImmediatePropagation(), F(S), m = J();
                                var o = B.offset();
                                h = O(e)[0] - o.top, f = O(e)[1] - o.left, L = [], D = []
                            }
                        }

                        function r(e) {
                            if (ee(e) && !c && !O(e)[2]) {
                                d = 0, e.stopImmediatePropagation(), _ = 0, C = 0, v = J();
                                var t = B.offset(),
                                    o = O(e)[0] - t.top,
                                    n = O(e)[1] - t.left;
                                if (!(v - g > 30)) {
                                    var a = "mcsEaseOut",
                                        i = 2.5 > (x = 1e3 / (v - m)),
                                        r = i ? [L[L.length - 2], D[D.length - 2]] : [0, 0];
                                    w = i ? [o - r[0], n - r[1]] : [o - h, n - f];
                                    var u = [Math.abs(w[0]), Math.abs(w[1])];
                                    x = i ? [Math.abs(w[0] / 4), Math.abs(w[1] / 4)] : [x, x];
                                    var p = [Math.abs(M[0].offsetTop) - w[0] * l(u[0] / x[0], x[0]), Math.abs(M[0].offsetLeft) - w[1] * l(u[1] / x[1], x[1])];
                                    y = "yx" === T.axis ? [p[0], p[1]] : "x" === T.axis ? [null, p[1]] : [p[0], null], b = [4 * u[0] + T.scrollInertia, 4 * u[1] + T.scrollInertia];
                                    var S = parseInt(T.contentTouchScroll) || 0;
                                    y[0] = u[0] > S ? y[0] : 0, y[1] = u[1] > S ? y[1] : 0, k.overflowed[0] && s(y[0], b[0], a, "y", H, !1), k.overflowed[1] && s(y[1], b[1], a, "x", H, !1)
                                }
                            }
                        }

                        function l(e, t) {
                            var o = [1.5 * t, 2 * t, t / 1.5, t / 2];
                            return e > 90 ? t > 4 ? o[0] : o[3] : e > 60 ? t > 3 ? o[3] : o[2] : e > 30 ? t > 8 ? o[1] : t > 6 ? o[0] : t > 4 ? t : o[2] : t > 8 ? t : o[3]
                        }

                        function s(e, t, o, n, a, i) {
                            e && V(S, e.toString(), {
                                dur: t,
                                scrollEasing: o,
                                dir: n,
                                overwrite: a,
                                drag: i
                            })
                        }
                        var d, u, p, h, f, m, g, v, w, x, y, b, _, C, S = e(this),
                            k = S.data(n),
                            T = k.opt,
                            $ = n + "_" + k.idx,
                            B = e("#mCSB_" + k.idx),
                            M = e("#mCSB_" + k.idx + "_container"),
                            E = [e("#mCSB_" + k.idx + "_dragger_vertical"), e("#mCSB_" + k.idx + "_dragger_horizontal")],
                            L = [],
                            D = [],
                            P = 0,
                            H = "yx" === T.axis ? "none" : "all",
                            R = [],
                            A = M.find("iframe"),
                            j = ["touchstart." + $ + " pointerdown." + $ + " MSPointerDown." + $, "touchmove." + $ + " pointermove." + $ + " MSPointerMove." + $, "touchend." + $ + " pointerup." + $ + " MSPointerUp." + $],
                            z = void 0 !== document.body.style.touchAction && "" !== document.body.style.touchAction;
                        M.bind(j[0], function (e) {
                            o(e)
                        }).bind(j[1], function (e) {
                            a(e)
                        }), B.bind(j[0], function (e) {
                            i(e)
                        }).bind(j[2], function (e) {
                            r(e)
                        }), A.length && A.each(function () {
                            e(this).bind("load", function () {
                                I(this) && e(this.contentDocument || this.contentWindow.document).bind(j[0], function (e) {
                                    o(e), i(e)
                                }).bind(j[1], function (e) {
                                    a(e)
                                }).bind(j[2], function (e) {
                                    r(e)
                                })
                            })
                        })
                    },
                    L = function () {
                        function o(e, t, o) {
                            s.type = o && a ? "stepped" : "stepless", s.scrollAmount = 10, U(i, e, t, "mcsLinearOut", o ? 60 : null)
                        }
                        var a, i = e(this),
                            r = i.data(n),
                            l = r.opt,
                            s = r.sequential,
                            d = n + "_" + r.idx,
                            u = e("#mCSB_" + r.idx + "_container"),
                            p = u.parent();
                        u.bind("mousedown." + d, function () {
                            t || a || (a = 1, c = !0)
                        }).add(document).bind("mousemove." + d, function (e) {
                            if (!t && a && (window.getSelection ? window.getSelection().toString() : document.selection && "Control" != document.selection.type && document.selection.createRange().text)) {
                                var n = u.offset(),
                                    i = O(e)[0] - n.top + u[0].offsetTop,
                                    c = O(e)[1] - n.left + u[0].offsetLeft;
                                i > 0 && i < p.height() && c > 0 && c < p.width() ? s.step && o("off", null, "stepped") : ("x" !== l.axis && r.overflowed[0] && (0 > i ? o("on", 38) : i > p.height() && o("on", 40)), "y" !== l.axis && r.overflowed[1] && (0 > c ? o("on", 37) : c > p.width() && o("on", 39)))
                            }
                        }).bind("mouseup." + d + " dragend." + d, function () {
                            t || (a && (a = 0, o("off", null)), c = !1)
                        })
                    },
                    D = function () {
                        function t(t, n) {
                            if (F(o), !R(o, t.target)) {
                                var r = "auto" !== i.mouseWheel.deltaFactor ? parseInt(i.mouseWheel.deltaFactor) : s && t.deltaFactor < 100 ? 100 : t.deltaFactor || 100,
                                    d = i.scrollInertia;
                                if ("x" === i.axis || "x" === i.mouseWheel.axis) var u = "x",
                                    p = [Math.round(r * a.scrollRatio.x), parseInt(i.mouseWheel.scrollAmount)],
                                    h = "auto" !== i.mouseWheel.scrollAmount ? p[1] : p[0] >= l.width() ? .9 * l.width() : p[0],
                                    f = Math.abs(e("#mCSB_" + a.idx + "_container")[0].offsetLeft),
                                    m = c[1][0].offsetLeft,
                                    g = c[1].parent().width() - c[1].width(),
                                    v = "y" === i.mouseWheel.axis ? t.deltaY || n : t.deltaX;
                                else u = "y", p = [Math.round(r * a.scrollRatio.y), parseInt(i.mouseWheel.scrollAmount)], h = "auto" !== i.mouseWheel.scrollAmount ? p[1] : p[0] >= l.height() ? .9 * l.height() : p[0], f = Math.abs(e("#mCSB_" + a.idx + "_container")[0].offsetTop), m = c[0][0].offsetTop, g = c[0].parent().height() - c[0].height(), v = t.deltaY || n;
                                "y" === u && !a.overflowed[0] || "x" === u && !a.overflowed[1] || ((i.mouseWheel.invert || t.webkitDirectionInvertedFromDevice) && (v = -v), i.mouseWheel.normalizeDelta && (v = 0 > v ? -1 : 1), (v > 0 && 0 !== m || 0 > v && m !== g || i.mouseWheel.preventDefault) && (t.stopImmediatePropagation(), t.preventDefault()), t.deltaFactor < 5 && !i.mouseWheel.normalizeDelta && (h = t.deltaFactor, d = 17), V(o, (f - v * h).toString(), {
                                    dir: u,
                                    dur: d
                                }))
                            }
                        }
                        if (e(this).data(n)) {
                            var o = e(this),
                                a = o.data(n),
                                i = a.opt,
                                r = n + "_" + a.idx,
                                l = e("#mCSB_" + a.idx),
                                c = [e("#mCSB_" + a.idx + "_dragger_vertical"), e("#mCSB_" + a.idx + "_dragger_horizontal")],
                                d = e("#mCSB_" + a.idx + "_container").find("iframe");
                            d.length && d.each(function () {
                                e(this).bind("load", function () {
                                    I(this) && e(this.contentDocument || this.contentWindow.document).bind("mousewheel." + r, function (e, o) {
                                        t(e, o)
                                    })
                                })
                            }), l.bind("mousewheel." + r, function (e, o) {
                                t(e, o)
                            })
                        }
                    },
                    P = new Object,
                    I = function (t) {
                        var o = !1,
                            n = !1,
                            a = null;
                        if (void 0 === t ? n = "#empty" : void 0 !== e(t).attr("id") && (n = e(t).attr("id")), !1 !== n && void 0 !== P[n]) return P[n];
                        if (t) {
                            try {
                                a = (t.contentDocument || t.contentWindow.document).body.innerHTML
                            } catch (e) { }
                            o = null !== a
                        } else {
                            try {
                                a = top.document.body.innerHTML
                            } catch (e) { }
                            o = null !== a
                        }
                        return !1 !== n && (P[n] = o), o
                    },
                    H = function (e) {
                        var t = this.find("iframe");
                        if (t.length) {
                            var o = e ? "auto" : "none";
                            t.css("pointer-events", o)
                        }
                    },
                    R = function (t, o) {
                        var a = o.nodeName.toLowerCase(),
                            i = t.data(n).opt.mouseWheel.disableOver;
                        return e.inArray(a, i) > -1 && !(e.inArray(a, ["select", "textarea"]) > -1 && !e(o).is(":focus"))
                    },
                    A = function () {
                        var t, o = e(this),
                            a = o.data(n),
                            i = n + "_" + a.idx,
                            r = e("#mCSB_" + a.idx + "_container"),
                            l = r.parent();
                        e(".mCSB_" + a.idx + "_scrollbar ." + d[12]).bind("mousedown." + i + " touchstart." + i + " pointerdown." + i + " MSPointerDown." + i, function (o) {
                            c = !0, e(o.target).hasClass("mCSB_dragger") || (t = 1)
                        }).bind("touchend." + i + " pointerup." + i + " MSPointerUp." + i, function () {
                            c = !1
                        }).bind("click." + i, function (n) {
                            if (t && (t = 0, e(n.target).hasClass(d[12]) || e(n.target).hasClass("mCSB_draggerRail"))) {
                                F(o);
                                var i = e(this),
                                    s = i.find(".mCSB_dragger");
                                if (i.parent(".mCSB_scrollTools_horizontal").length > 0) {
                                    if (!a.overflowed[1]) return;
                                    var c = "x",
                                        u = n.pageX > s.offset().left ? -1 : 1,
                                        p = Math.abs(r[0].offsetLeft) - u * (.9 * l.width())
                                } else {
                                    if (!a.overflowed[0]) return;
                                    c = "y", u = n.pageY > s.offset().top ? -1 : 1, p = Math.abs(r[0].offsetTop) - u * (.9 * l.height())
                                }
                                V(o, p.toString(), {
                                    dir: c,
                                    scrollEasing: "mcsEaseInOut"
                                })
                            }
                        })
                    },
                    j = function () {
                        var t = e(this),
                            o = t.data(n),
                            a = o.opt,
                            i = n + "_" + o.idx,
                            r = e("#mCSB_" + o.idx + "_container"),
                            l = r.parent();
                        r.bind("focusin." + i, function () {
                            var o = e(document.activeElement),
                                n = r.find(".mCustomScrollBox").length;
                            o.is(a.advanced.autoScrollOnFocus) && (F(t), clearTimeout(t[0]._focusTimeout), t[0]._focusTimer = n ? 17 * n : 0, t[0]._focusTimeout = setTimeout(function () {
                                var e = [oe(o)[0], oe(o)[1]],
                                    n = [r[0].offsetTop, r[0].offsetLeft],
                                    i = [n[0] + e[0] >= 0 && n[0] + e[0] < l.height() - o.outerHeight(!1), n[1] + e[1] >= 0 && n[0] + e[1] < l.width() - o.outerWidth(!1)],
                                    s = "yx" !== a.axis || i[0] || i[1] ? "all" : "none";
                                "x" === a.axis || i[0] || V(t, e[0].toString(), {
                                    dir: "y",
                                    scrollEasing: "mcsEaseInOut",
                                    overwrite: s,
                                    dur: 0
                                }), "y" === a.axis || i[1] || V(t, e[1].toString(), {
                                    dir: "x",
                                    scrollEasing: "mcsEaseInOut",
                                    overwrite: s,
                                    dur: 0
                                })
                            }, t[0]._focusTimer))
                        })
                    },
                    z = function () {
                        var t = e(this).data(n),
                            o = n + "_" + t.idx,
                            a = e("#mCSB_" + t.idx + "_container").parent();
                        a.bind("scroll." + o, function () {
                            0 === a.scrollTop() && 0 === a.scrollLeft() || e(".mCSB_" + t.idx + "_scrollbar").css("visibility", "hidden")
                        })
                    },
                    W = function () {
                        var t = e(this),
                            o = t.data(n),
                            a = o.opt,
                            i = o.sequential,
                            r = n + "_" + o.idx,
                            l = ".mCSB_" + o.idx + "_scrollbar";
                        e(l + ">a").bind("contextmenu." + r, function (e) {
                            e.preventDefault()
                        }).bind("mousedown." + r + " touchstart." + r + " pointerdown." + r + " MSPointerDown." + r + " mouseup." + r + " touchend." + r + " pointerup." + r + " MSPointerUp." + r + " mouseout." + r + " pointerout." + r + " MSPointerOut." + r + " click." + r, function (n) {
                            function r(e, o) {
                                i.scrollAmount = a.scrollButtons.scrollAmount, U(t, e, o)
                            }
                            if (n.preventDefault(), K(n)) {
                                var l = e(this).attr("class");
                                switch (i.type = a.scrollButtons.scrollType, n.type) {
                                    case "mousedown":
                                    case "touchstart":
                                    case "pointerdown":
                                    case "MSPointerDown":
                                        if ("stepped" === i.type) return;
                                        c = !0, o.tweenRunning = !1, r("on", l);
                                        break;
                                    case "mouseup":
                                    case "touchend":
                                    case "pointerup":
                                    case "MSPointerUp":
                                    case "mouseout":
                                    case "pointerout":
                                    case "MSPointerOut":
                                        if ("stepped" === i.type) return;
                                        c = !1, i.dir && r("off", l);
                                        break;
                                    case "click":
                                        if ("stepped" !== i.type || o.tweenRunning) return;
                                        r("on", l)
                                }
                            }
                        })
                    },
                    q = function () {
                        function t(t) {
                            function n(e, t) {
                                r.type = i.keyboard.scrollType, r.scrollAmount = i.keyboard.scrollAmount, "stepped" === r.type && a.tweenRunning || U(o, e, t)
                            }
                            switch (t.type) {
                                case "blur":
                                    a.tweenRunning && r.dir && n("off", null);
                                    break;
                                case "keydown":
                                case "keyup":
                                    var l = t.keyCode ? t.keyCode : t.which,
                                        s = "on";
                                    if ("x" !== i.axis && (38 === l || 40 === l) || "y" !== i.axis && (37 === l || 39 === l)) {
                                        if ((38 === l || 40 === l) && !a.overflowed[0] || (37 === l || 39 === l) && !a.overflowed[1]) return;
                                        "keyup" === t.type && (s = "off"), e(document.activeElement).is(u) || (t.preventDefault(), t.stopImmediatePropagation(), n(s, l))
                                    } else if (33 === l || 34 === l) {
                                        if ((a.overflowed[0] || a.overflowed[1]) && (t.preventDefault(), t.stopImmediatePropagation()), "keyup" === t.type) {
                                            F(o);
                                            var p = 34 === l ? -1 : 1;
                                            if ("x" === i.axis || "yx" === i.axis && a.overflowed[1] && !a.overflowed[0]) var h = "x",
                                                f = Math.abs(c[0].offsetLeft) - p * (.9 * d.width());
                                            else h = "y", f = Math.abs(c[0].offsetTop) - p * (.9 * d.height());
                                            V(o, f.toString(), {
                                                dir: h,
                                                scrollEasing: "mcsEaseInOut"
                                            })
                                        }
                                    } else 35 !== l && 36 !== l || e(document.activeElement).is(u) || ((a.overflowed[0] || a.overflowed[1]) && (t.preventDefault(), t.stopImmediatePropagation()), "keyup" !== t.type) || ("x" === i.axis || "yx" === i.axis && a.overflowed[1] && !a.overflowed[0] ? (h = "x", f = 35 === l ? Math.abs(d.width() - c.outerWidth(!1)) : 0) : (h = "y", f = 35 === l ? Math.abs(d.height() - c.outerHeight(!1)) : 0), V(o, f.toString(), {
                                        dir: h,
                                        scrollEasing: "mcsEaseInOut"
                                    }))
                            }
                        }
                        var o = e(this),
                            a = o.data(n),
                            i = a.opt,
                            r = a.sequential,
                            l = n + "_" + a.idx,
                            s = e("#mCSB_" + a.idx),
                            c = e("#mCSB_" + a.idx + "_container"),
                            d = c.parent(),
                            u = "input,textarea,select,datalist,keygen,[contenteditable='true']",
                            p = c.find("iframe"),
                            h = ["blur." + l + " keydown." + l + " keyup." + l];
                        p.length && p.each(function () {
                            e(this).bind("load", function () {
                                I(this) && e(this.contentDocument || this.contentWindow.document).bind(h[0], function (e) {
                                    t(e)
                                })
                            })
                        }), s.attr("tabindex", "0").bind(h[0], function (e) {
                            t(e)
                        })
                    },
                    U = function (t, o, a, i, r) {
                        function l(e) {
                            c.snapAmount && (u.scrollAmount = c.snapAmount instanceof Array ? "x" === u.dir[0] ? c.snapAmount[1] : c.snapAmount[0] : c.snapAmount);
                            var o = "stepped" !== u.type,
                                n = r || (e ? o ? f / 1.5 : m : 1e3 / 60),
                                a = e ? o ? 7.5 : 40 : 2.5,
                                d = [Math.abs(p[0].offsetTop), Math.abs(p[0].offsetLeft)],
                                h = [s.scrollRatio.y > 10 ? 10 : s.scrollRatio.y, s.scrollRatio.x > 10 ? 10 : s.scrollRatio.x],
                                g = "x" === u.dir[0] ? d[1] + u.dir[1] * (h[1] * a) : d[0] + u.dir[1] * (h[0] * a),
                                v = "x" === u.dir[0] ? d[1] + u.dir[1] * parseInt(u.scrollAmount) : d[0] + u.dir[1] * parseInt(u.scrollAmount),
                                w = "auto" !== u.scrollAmount ? v : g,
                                x = i || (e ? o ? "mcsLinearOut" : "mcsEaseInOut" : "mcsLinear"),
                                y = !!e;
                            return e && 17 > n && (w = "x" === u.dir[0] ? d[1] : d[0]), V(t, w.toString(), {
                                dir: u.dir[0],
                                scrollEasing: x,
                                dur: n,
                                onComplete: y
                            }), e ? void (u.dir = !1) : (clearTimeout(u.step), void (u.step = setTimeout(function () {
                                l()
                            }, n)))
                        }
                        var s = t.data(n),
                            c = s.opt,
                            u = s.sequential,
                            p = e("#mCSB_" + s.idx + "_container"),
                            h = "stepped" === u.type,
                            f = c.scrollInertia < 26 ? 26 : c.scrollInertia,
                            m = c.scrollInertia < 1 ? 17 : c.scrollInertia;
                        switch (o) {
                            case "on":
                                if (u.dir = [a === d[16] || a === d[15] || 39 === a || 37 === a ? "x" : "y", a === d[13] || a === d[15] || 38 === a || 37 === a ? -1 : 1], F(t), te(a) && "stepped" === u.type) return;
                                l(h);
                                break;
                            case "off":
                                clearTimeout(u.step), G(u, "step"), F(t), (h || s.tweenRunning && u.dir) && l(!0)
                        }
                    },
                    N = function (t) {
                        var o = e(this).data(n).opt,
                            a = [];
                        return "function" == typeof t && (t = t()), t instanceof Array ? a = t.length > 1 ? [t[0], t[1]] : "x" === o.axis ? [null, t[0]] : [t[0], null] : (a[0] = t.y ? t.y : t.x || "x" === o.axis ? null : t, a[1] = t.x ? t.x : t.y || "y" === o.axis ? null : t), "function" == typeof a[0] && (a[0] = a[0]()), "function" == typeof a[1] && (a[1] = a[1]()), a
                    },
                    Y = function (t, o) {
                        if (null != t && void 0 !== t) {
                            var a = e(this),
                                i = a.data(n),
                                r = i.opt,
                                l = e("#mCSB_" + i.idx + "_container"),
                                s = l.parent(),
                                c = typeof t;
                            o || (o = "x" === r.axis ? "x" : "y");
                            var d = "x" === o ? l.outerWidth(!1) - s.width() : l.outerHeight(!1) - s.height(),
                                p = "x" === o ? l[0].offsetLeft : l[0].offsetTop,
                                h = "x" === o ? "left" : "top";
                            switch (c) {
                                case "function":
                                    return t();
                                case "object":
                                    if (!(m = t.jquery ? t : e(t)).length) return;
                                    return "x" === o ? oe(m)[1] : oe(m)[0];
                                case "string":
                                case "number":
                                    if (te(t)) return Math.abs(t);
                                    if (-1 !== t.indexOf("%")) return Math.abs(d * parseInt(t) / 100);
                                    if (-1 !== t.indexOf("-=")) return Math.abs(p - parseInt(t.split("-=")[1]));
                                    if (-1 !== t.indexOf("+=")) {
                                        var f = p + parseInt(t.split("+=")[1]);
                                        return f >= 0 ? 0 : Math.abs(f)
                                    }
                                    if (-1 !== t.indexOf("px") && te(t.split("px")[0])) return Math.abs(t.split("px")[0]);
                                    if ("top" === t || "left" === t) return 0;
                                    if ("bottom" === t) return Math.abs(s.height() - l.outerHeight(!1));
                                    if ("right" === t) return Math.abs(s.width() - l.outerWidth(!1));
                                    if ("first" === t || "last" === t) {
                                        var m = l.find(":" + t);
                                        return "x" === o ? oe(m)[1] : oe(m)[0]
                                    }
                                    return e(t).length ? "x" === o ? oe(e(t))[1] : oe(e(t))[0] : (l.css(h, t), void u.update.call(null, a[0]))
                            }
                        }
                    },
                    X = function (t) {
                        function o(e) {
                            clearTimeout(l[0].autoUpdate), u.update.call(null, a[0], e)
                        }
                        var a = e(this),
                            i = a.data(n),
                            r = i.opt,
                            l = e("#mCSB_" + i.idx + "_container");
                        return t ? (clearTimeout(l[0].autoUpdate), void G(l[0], "autoUpdate")) : void
                            function t() {
                                return clearTimeout(l[0].autoUpdate), 0 === a.parents("html").length ? void (a = null) : void (l[0].autoUpdate = setTimeout(function () {
                                    return r.advanced.updateOnSelectorChange && (i.poll.change.n = function () {
                                        !0 === r.advanced.updateOnSelectorChange && (r.advanced.updateOnSelectorChange = "*");
                                        var e = 0,
                                            t = l.find(r.advanced.updateOnSelectorChange);
                                        return r.advanced.updateOnSelectorChange && t.length > 0 && t.each(function () {
                                            e += this.offsetHeight + this.offsetWidth
                                        }), e
                                    }(), i.poll.change.n !== i.poll.change.o) ? (i.poll.change.o = i.poll.change.n, void o(3)) : r.advanced.updateOnContentResize && (i.poll.size.n = a[0].scrollHeight + a[0].scrollWidth + l[0].offsetHeight + a[0].offsetHeight + a[0].offsetWidth, i.poll.size.n !== i.poll.size.o) ? (i.poll.size.o = i.poll.size.n, void o(1)) : !r.advanced.updateOnImageLoad || "auto" === r.advanced.updateOnImageLoad && "y" === r.axis || (i.poll.img.n = l.find("img").length, i.poll.img.n === i.poll.img.o) ? void ((r.advanced.updateOnSelectorChange || r.advanced.updateOnContentResize || r.advanced.updateOnImageLoad) && t()) : (i.poll.img.o = i.poll.img.n, void l.find("img").each(function () {
                                        ! function (t) {
                                            if (e(t).hasClass(d[2])) o();
                                            else {
                                                var n = new Image;
                                                n.onload = function (e, t) {
                                                    return function () {
                                                        return t.apply(e, arguments)
                                                    }
                                                }(n, function () {
                                                    this.onload = null, e(t).addClass(d[2]), o(2)
                                                }), n.src = t.src
                                            }
                                        }(this)
                                    }))
                                }, r.advanced.autoUpdateTimeout))
                            }()
                    },
                    F = function (t) {
                        var o = t.data(n);
                        e("#mCSB_" + o.idx + "_container,#mCSB_" + o.idx + "_container_wrapper,#mCSB_" + o.idx + "_dragger_vertical,#mCSB_" + o.idx + "_dragger_horizontal").each(function () {
                            Z.call(this)
                        })
                    },
                    V = function (t, o, a) {
                        function i(e) {
                            return l && s.callbacks[e] && "function" == typeof s.callbacks[e]
                        }

                        function r() {
                            var e = [p[0].offsetTop, p[0].offsetLeft],
                                o = [g[0].offsetTop, g[0].offsetLeft],
                                n = [p.outerHeight(!1), p.outerWidth(!1)],
                                i = [u.height(), u.width()];
                            t[0].mcs = {
                                content: p,
                                top: e[0],
                                left: e[1],
                                draggerTop: o[0],
                                draggerLeft: o[1],
                                topPct: Math.round(100 * Math.abs(e[0]) / (Math.abs(n[0]) - i[0])),
                                leftPct: Math.round(100 * Math.abs(e[1]) / (Math.abs(n[1]) - i[1])),
                                direction: a.dir
                            }
                        }
                        var l = t.data(n),
                            s = l.opt,
                            c = {
                                trigger: "internal",
                                dir: "y",
                                scrollEasing: "mcsEaseOut",
                                drag: !1,
                                dur: s.scrollInertia,
                                overwrite: "all",
                                callbacks: !0,
                                onStart: !0,
                                onUpdate: !0,
                                onComplete: !0
                            },
                            d = [(a = e.extend(c, a)).dur, a.drag ? 0 : a.dur],
                            u = e("#mCSB_" + l.idx),
                            p = e("#mCSB_" + l.idx + "_container"),
                            h = p.parent(),
                            f = s.callbacks.onTotalScrollOffset ? N.call(t, s.callbacks.onTotalScrollOffset) : [0, 0],
                            m = s.callbacks.onTotalScrollBackOffset ? N.call(t, s.callbacks.onTotalScrollBackOffset) : [0, 0];
                        if (l.trigger = a.trigger, 0 === h.scrollTop() && 0 === h.scrollLeft() || (e(".mCSB_" + l.idx + "_scrollbar").css("visibility", "visible"), h.scrollTop(0).scrollLeft(0)), "_resetY" !== o || l.contentReset.y || (i("onOverflowYNone") && s.callbacks.onOverflowYNone.call(t[0]), l.contentReset.y = 1), "_resetX" !== o || l.contentReset.x || (i("onOverflowXNone") && s.callbacks.onOverflowXNone.call(t[0]), l.contentReset.x = 1), "_resetY" !== o && "_resetX" !== o) {
                            switch (!l.contentReset.y && t[0].mcs || !l.overflowed[0] || (i("onOverflowY") && s.callbacks.onOverflowY.call(t[0]), l.contentReset.x = null), !l.contentReset.x && t[0].mcs || !l.overflowed[1] || (i("onOverflowX") && s.callbacks.onOverflowX.call(t[0]), l.contentReset.x = null), s.snapAmount && (o = function (e, t, o) {
                                return Math.round(e / t) * t - o
                            }(o, s.snapAmount instanceof Array ? "x" === a.dir ? s.snapAmount[1] : s.snapAmount[0] : s.snapAmount, s.snapOffset)), a.dir) {
                                case "x":
                                    var g = e("#mCSB_" + l.idx + "_dragger_horizontal"),
                                        v = "left",
                                        w = p[0].offsetLeft,
                                        x = [u.width() - p.outerWidth(!1), g.parent().width() - g.width()],
                                        y = [o, 0 === o ? 0 : o / l.scrollRatio.x],
                                        b = f[1],
                                        _ = m[1],
                                        S = b > 0 ? b / l.scrollRatio.x : 0,
                                        k = _ > 0 ? _ / l.scrollRatio.x : 0;
                                    break;
                                case "y":
                                    g = e("#mCSB_" + l.idx + "_dragger_vertical"), v = "top", w = p[0].offsetTop, x = [u.height() - p.outerHeight(!1), g.parent().height() - g.height()], y = [o, 0 === o ? 0 : o / l.scrollRatio.y], b = f[0], _ = m[0], S = b > 0 ? b / l.scrollRatio.y : 0, k = _ > 0 ? _ / l.scrollRatio.y : 0
                            }
                            y[1] < 0 || 0 === y[0] && 0 === y[1] ? y = [0, 0] : y[1] >= x[1] ? y = [x[0], x[1]] : y[0] = -y[0], t[0].mcs || (r(), i("onInit") && s.callbacks.onInit.call(t[0])), clearTimeout(p[0].onCompleteTimeout), Q(g[0], v, Math.round(y[1]), d[1], a.scrollEasing), !l.tweenRunning && (0 === w && y[0] >= 0 || w === x[0] && y[0] <= x[0]) || Q(p[0], v, Math.round(y[0]), d[0], a.scrollEasing, a.overwrite, {
                                onStart: function () {
                                    a.callbacks && a.onStart && !l.tweenRunning && (i("onScrollStart") && (r(), s.callbacks.onScrollStart.call(t[0])), l.tweenRunning = !0, C(g), l.cbOffsets = [s.callbacks.alwaysTriggerOffsets || w >= x[0] + b, s.callbacks.alwaysTriggerOffsets || -_ >= w])
                                },
                                onUpdate: function () {
                                    a.callbacks && a.onUpdate && i("whileScrolling") && (r(), s.callbacks.whileScrolling.call(t[0]))
                                },
                                onComplete: function () {
                                    if (a.callbacks && a.onComplete) {
                                        "yx" === s.axis && clearTimeout(p[0].onCompleteTimeout);
                                        var e = p[0].idleTimer || 0;
                                        p[0].onCompleteTimeout = setTimeout(function () {
                                            i("onScroll") && (r(), s.callbacks.onScroll.call(t[0])), i("onTotalScroll") && y[1] >= x[1] - S && l.cbOffsets[0] && (r(), s.callbacks.onTotalScroll.call(t[0])), i("onTotalScrollBack") && y[1] <= k && l.cbOffsets[1] && (r(), s.callbacks.onTotalScrollBack.call(t[0])), l.tweenRunning = !1, p[0].idleTimer = 0, C(g, "hide")
                                        }, e)
                                    }
                                }
                            })
                        }
                    },
                    Q = function (e, t, o, n, a, i, r) {
                        function l() {
                            n > 0 ? (v.currVal = function (e, t, o, n, a) {
                                switch (a) {
                                    case "linear":
                                    case "mcsLinear":
                                        return o * e / n + t;
                                    case "mcsLinearOut":
                                        return e /= n, e--, o * Math.sqrt(1 - e * e) + t;
                                    case "easeInOutSmooth":
                                        return 1 > (e /= n / 2) ? o / 2 * e * e + t : -o / 2 * (--e * (e - 2) - 1) + t;
                                    case "easeInOutStrong":
                                        return 1 > (e /= n / 2) ? o / 2 * Math.pow(2, 10 * (e - 1)) + t : (e--, o / 2 * (2 - Math.pow(2, -10 * e)) + t);
                                    case "easeInOut":
                                    case "mcsEaseInOut":
                                        return 1 > (e /= n / 2) ? o / 2 * e * e * e + t : o / 2 * ((e -= 2) * e * e + 2) + t;
                                    case "easeOutSmooth":
                                        return e /= n, -o * (--e * e * e * e - 1) + t;
                                    case "easeOutStrong":
                                        return o * (1 - Math.pow(2, -10 * e / n)) + t;
                                    case "easeOut":
                                    case "mcsEaseOut":
                                    default:
                                        var i = (e /= n) * e,
                                            r = i * e;
                                        return t + o * (.499999999999997 * r * i + -2.5 * i * i + 5.5 * r + -6.5 * i + 4 * e)
                                }
                            }(v.time, m, w, n, a), g[t] = Math.round(v.currVal) + "px") : g[t] = o + "px", u.call()
                        }
                        e._mTween || (e._mTween = {
                            top: {},
                            left: {}
                        });
                        var s, c, d = (r = r || {}).onStart || function () { },
                            u = r.onUpdate || function () { },
                            p = r.onComplete || function () { },
                            h = J(),
                            f = 0,
                            m = e.offsetTop,
                            g = e.style,
                            v = e._mTween[t];
                        "left" === t && (m = e.offsetLeft);
                        var w = o - m;
                        v.stop = 0, "none" !== i && null != v.id && (window.requestAnimationFrame ? window.cancelAnimationFrame(v.id) : clearTimeout(v.id), v.id = null), s = 1e3 / 60, v.time = f + s, c = window.requestAnimationFrame ? window.requestAnimationFrame : function (e) {
                            return l(), setTimeout(e, .01)
                        }, v.id = c(function e() {
                            v.stop || (f || d.call(), f = J() - h, l(), f >= v.time && (v.time = f > v.time ? f + s - (f - v.time) : f + s - 1, v.time < f + 1 && (v.time = f + 1)), v.time < n ? v.id = c(e) : p.call())
                        })
                    },
                    J = function () {
                        return window.performance && window.performance.now ? window.performance.now() : window.performance && window.performance.webkitNow ? window.performance.webkitNow() : Date.now ? Date.now() : (new Date).getTime()
                    },
                    Z = function () {
                        var e = this;
                        e._mTween || (e._mTween = {
                            top: {},
                            left: {}
                        });
                        for (var t = ["top", "left"], o = 0; o < t.length; o++) {
                            var n = t[o];
                            e._mTween[n].id && (window.requestAnimationFrame ? window.cancelAnimationFrame(e._mTween[n].id) : clearTimeout(e._mTween[n].id), e._mTween[n].id = null, e._mTween[n].stop = 1)
                        }
                    },
                    G = function (e, t) {
                        try {
                            delete e[t]
                        } catch (o) {
                            e[t] = null
                        }
                    },
                    K = function (e) {
                        return !(e.which && 1 !== e.which)
                    },
                    ee = function (e) {
                        var t = e.originalEvent.pointerType;
                        return !(t && "touch" !== t && 2 !== t)
                    },
                    te = function (e) {
                        return !isNaN(parseFloat(e)) && isFinite(e)
                    },
                    oe = function (e) {
                        var t = e.parents(".mCSB_container");
                        return [e.offset().top - t.offset().top, e.offset().left - t.offset().left]
                    },
                    ne = function () {
                        var e = function () {
                            var e = ["webkit", "moz", "ms", "o"];
                            if ("hidden" in document) return "hidden";
                            for (var t = 0; t < e.length; t++)
                                if (e[t] + "Hidden" in document) return e[t] + "Hidden";
                            return null
                        }();
                        return !!e && document[e]
                    };
                e.fn[o] = function (t) {
                    return u[t] ? u[t].apply(this, Array.prototype.slice.call(arguments, 1)) : "object" != typeof t && t ? void e.error("Method " + t + " does not exist") : u.init.apply(this, arguments)
                }, e[o] = function (t) {
                    return u[t] ? u[t].apply(this, Array.prototype.slice.call(arguments, 1)) : "object" != typeof t && t ? void e.error("Method " + t + " does not exist") : u.init.apply(this, arguments)
                }, e[o].defaults = i, window[o] = !0, e(window).bind("load", function () {
                    e(a)[o](), e.extend(e.expr[":"], {
                        mcsInView: e.expr[":"].mcsInView || function (t) {
                            var o, n, a = e(t),
                                i = a.parents(".mCSB_container");
                            if (i.length) return o = i.parent(), (n = [i[0].offsetTop, i[0].offsetLeft])[0] + oe(a)[0] >= 0 && n[0] + oe(a)[0] < o.height() - a.outerHeight(!1) && n[1] + oe(a)[1] >= 0 && n[1] + oe(a)[1] < o.width() - a.outerWidth(!1)
                        },
                        mcsInSight: e.expr[":"].mcsInSight || function (t, o, n) {
                            var a, i, r, l, s = e(t),
                                c = s.parents(".mCSB_container"),
                                d = "exact" === n[3] ? [
                                    [1, 0],
                                    [1, 0]
                                ] : [
                                    [.9, .1],
                                    [.6, .4]
                                ];
                            if (c.length) return a = [s.outerHeight(!1), s.outerWidth(!1)], r = [c[0].offsetTop + oe(s)[0], c[0].offsetLeft + oe(s)[1]], i = [c.parent()[0].offsetHeight, c.parent()[0].offsetWidth], r[0] - i[0] * (l = [a[0] < i[0] ? d[0] : d[1], a[1] < i[1] ? d[0] : d[1]])[0][0] < 0 && r[0] + a[0] - i[0] * l[0][1] >= 0 && r[1] - i[1] * l[1][0] < 0 && r[1] + a[1] - i[1] * l[1][1] >= 0
                        },
                        mcsOverflow: e.expr[":"].mcsOverflow || function (t) {
                            var o = e(t).data(n);
                            if (o) return o.overflowed[0] || o.overflowed[1]
                        }
                    })
                })
            }()
    });

     /**
     * pincode and location
     */

      $(document).ready(function(){
        if (getCookieVal('pincode') != '') {
        getdata(getCookieVal('pincode'));
      } else if (getCookieVal('pincode') != '' && getCookieVal('city') != '') {
      
        $(".deliver-tooltip").html('');
        $('#pin').val('').attr('placeholder', getCookieVal('pincode') + ':' + getCookieVal('city')).attr('disabled', 'disabled');
        $('#change,#changeheader').show(); $('#check,#checkheader').hide(); $(".deliver-tooltip1").show();
        getpindata(getCookieVal('pincode'), getCookieVal('city'));
        //alert(1)
      } else {
        getLocation();
      }
    });
  function getLocation() {
   
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(showPosition);
    } else {
      x.innerHTML = "Geolocation is not supported by this browser.";
    }
  }
  
  function chagePin() {
    $('#change,#changeheader,.deliver-tooltip').hide(); $('#check,#checkheader,.del-note').show();
    $('#pin,#headerpin').removeAttr('disabled').focus().attr('placeholder', 'Enter Pincode');
  }
  
  var lat = '';
  var long = '';
  
  function showPosition(position) {
  
    lat = position.coords.latitude;
    long = position.coords.longitude;
    
    setCookie('lat', lat, 1);
    setCookie('long', long, 1);
  
  
    $.getJSON('js/llt.json').done(function (catJson) {
      catJson.forEach(function (i) {
        if (distance(lat, long, i.lat, i.long, "N") <= 10) {
          $.ajax({
            type: "POST",
            url: "index.php?route=module/pincode/pinCheckCity",
            data: { city: i.city, lat: lat, long: long },
            dataType: "text"
          }).done(function (result) {
            if (result.trim() != 0) {
             
              var pindata = JSON.parse(result);
              getpindata(pindata.pincode, pindata.city);
              $(".deliver-tooltip").show();
  
              $('#change,#changeheader').show(); $('#check,checkheader').hide();
              if (pindata.pincode && pindata.city)
                $('#pin').attr('placeholder', pindata.pincode + ':' + pindata.city).attr('disabled', 'disabled');
            }
          });
        }
      });
    });
  }
  
  function getCookieVal(cname) {
    var name = cname + "=";
    var decodedCookie = decodeURIComponent(document.cookie);
    var ca = decodedCookie.split(';');
    for (var i = 0; i < ca.length; i++) {
      var c = ca[i];
      while (c.charAt(0) == ' ') {
        c = c.substring(1);
      }
      if (c.indexOf(name) == 0) {
        return c.substring(name.length, c.length).replaceAll("+"," ");
      }
    }
    return "";
  }
  
  function setCookie(name, value, days) {
    var expires = "";
    if (days) {
      var date = new Date();
      date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
      expires = "; expires=" + date.toUTCString();
    }
  
    document.cookie = name + "=" + (value || "") + expires + "; path=/";
  }
  
  
  
  function distance(lat1, lon1, lat2, lon2, unit) {
    var radlat1 = Math.PI * lat1 / 180
    var radlat2 = Math.PI * lat2 / 180
    var theta = lon1 - lon2
    var radtheta = Math.PI * theta / 180
    var dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);
    if (dist > 1) {
      dist = 1;
    }
    dist = Math.acos(dist)
    dist = dist * 180 / Math.PI
    dist = dist * 60 * 1.1515
    if (unit == "K") { dist = dist * 1.609344 }
    if (unit == "N") { dist = dist * 0.8684 }
    return dist
  }
  
//Pincode form
 $("#pin,#headerpin").on('keyup', function (e) {
    
    if (e.keyCode == 13) {
        if($(this).attr('id') == 'headerpin'){
            getdata(1) 
        }else{
            getdata() 
        }
    }
  });
  
    function getdata(pin = 0,type = 0) {
        
        $('.deliver-form > p').hide();
        $('#pinError,#pinheadError').html('').hide();
        var reg_number = /^[0-9- ]*$/;
        var oldpin = getCookieVal('pincode');
        if (pin == 0) { var pin = $('#pin').val(); }

        if (pin == 1) { var pin = $('#headerpin').val(); }
        var quantity = $('#product').attr('data-quantity');
        var product_id = $('#product').val();
        //setCookie('pincode', pin, 1);
        if (pin != '' && reg_number.test(pin) && pin.length == 6 && pin > 0) {
            setCookie('pincode', pin, 1);
           
            $('.update-pin').addClass('button-disabled buttonload');
        var productsprice = $('#product').attr('data-sprice');
        var productshiping = $('#product').attr('data-ship');
        var installReq = $('#product').attr('data-installReq');
        var material_code = $('#product').attr('data-matCode');
        if(material_code){
        initializeMap(pin);
            //console.log(0)
        }
       
        $.ajax({
            type: "POST",
            url: "index.php?route=module/pincode/pinCheck",
            data: { pincode: pin, quantity: quantity, product_id: product_id, productsprice, productshiping, installReq: installReq, matCode: material_code },
            dataType: "text"
        }).done(function (result) {
            if(result && getCookieVal('pincode')){
                
                result = JSON.parse(result);
               
                window.location.href.indexOf("express-delivery") !=-1 && oldpin !=pin? 
                window.location = 'express-delivery' :'';
                var storeLatLong = result.pindata.stores;
               setTimeout(function(){
                   $(storeLatLong).each(function(ind,ele){
                        
                    Storedistance3(ele.latitude,ele.longitude,ele.store_id,pin);  
                    });
              },100);
             
                $(".deliver-tooltip").show();
                $(".deliver-tooltip").html(result.product);
               
                /*$(".address-list").html(result.header);
                $(".pin-map").remove();*/
                setTimeout(function(){
                    $(".NearestStore").html();
                    $(".sorting").sort(sort_li).appendTo('.NearestStore');
                    if($(".sorting").length > 2){
                    $(".NearestStore > li:nth-child(3)").after('<li class="remove prevent"><a target="_blank" onclick="showAll(0);"><article><b style="color: #434343;" class="distance" ></b>View All Store ('+$(".sorting").length+')</article></a></li> ');
                    $(".NearestStore").append('<li id="show" class="prevent" style="display:none"><a target="_blank" onclick="showAll(1);"><article style="color: #F3601E;display: inline-block;cursor: pointer;"><b style="color: #434343;" class="distance" ></b>View Less </article></a></li>');
                    }
                },100);
                
                $(".storeBox").html(result.header);
                $('.update-pin').removeClass('button-disabled buttonload');
                if ($(document).find('#msg .pincheckform').html() == undefined) {
                $('#pin').val('').attr('placeholder', getCookieVal('pincode') + ':' + getCookieVal('city')).attr('disabled', 'disabled');
                $('.pintxtherder').val('').attr('placeholder',getCookieVal('pincode') + ',' +  getCookieVal('city')).attr('disabled', 'disabled');;
                $('.hedertext').text(getCookieVal('pincode') + ', ' +  getCookieVal('city').toLowerCase());
                $('#change,#changeheader').show(); $('#check,#checkheader').hide(); $(".deliver-tooltip1").show();
                }
                $('.del-note').hide();
                //getMobStores(pin);
            } else {
                $('#pinError,#pinheadError').html('Delivery option not available on requested area.').show();
                $('.update-pin').removeClass('button-disabled buttonload');
               if(result){

                result = JSON.parse(result);
                $(".deliver-tooltip").show();
                $(".storeBox").html('');
                $(".deliver-tooltip").html(result.product);

               }
                
            }
        });
        } else {
        $('#pinError,#pinheadError').html('Please enter a valid Pincode').show();
        }
        $('.close-btn').click(function () {
        $('.deliver-tooltip').hide(); $('p.delivery-date').show();
        })
    }
    function sort_li(a, b){
        return ($(b).data('sort')) < ($(a).data('sort')) ? 1 : -1;    
    }
    function getpindata(pin, city) {
      
        var quantity = $('#product').attr('data-quantity');
        var productsprice = $('#product').attr('data-sprice');
        var productshiping = $('#product').attr('data-ship');
        var installReq = $('#product').attr('data-installReq');
        var product_id = $('#product').val();
        $('.update-pin').addClass('button-disabled buttonload');
        setCookie('city', city, 1);
        if(product_id){
            initializeMap(pin);
            
        }
        $.ajax({
        type: "POST",
        url: "index.php?route=module/pincode/pinCheck",
        data: { pincode: pin, city: city, quantity: quantity, product_id: product_id, installReq: installReq, matCode: material_code },
        dataType: "text"
        }).done(function (result) {
            ('.update-pin').removeClass('button-disabled buttonload');
            if(result && getCookieVal('pincode')){
            console.log(9);
                result = JSON.parse(result);
                $(".deliver-tooltip").show();
                
                
                $(".deliver-tooltip,").html(result.product);
                var storeLatLong = result.pindata.stores;
               
                $(storeLatLong).each(function(ind,ele){
                  
                    Storedistance3(ele.latitude,ele.longitude,ele.store_id,pin);  
                }); 
                $(".storeBox").html(result.header);
                
                $('.del-note').hide();
                $('.pintxtherder').val('').attr('placeholder', getCookieVal('city') + ',' + getCookieVal('pincode')).attr('disabled', 'disabled');;
                $('.hedertext').text(getCookieVal('pincode') + ', ' +  getCookieVal('city').toLowerCase());
            }else{
                $('#pinError,#pinheadError').html('Delivery option not available on requested area.').show();
            }
            
        });
    }

  function Storedistance3(lat1, lon1, unit, pincode) {
  
    /*var lat = getCookieVal('lat');
    var long = getCookieVal('long');*/

     var lat = getCookieVal('latnew');
    var long = getCookieVal('lngnew');
   
   
    if (lat == '' || long == '') {
      getLocation();
     
      var lat = getCookieVal('lat');
      var long = getCookieVal('long');
    }

    var radlat1 = Math.PI * lat1 / 180
    var radlat2 = Math.PI * lat / 180
    var radlon1 = Math.PI * lon1 / 180
    var radlon2 = Math.PI * long / 180
    var theta = lon1 - long
    var radtheta = Math.PI * theta / 180
    var dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);
    dist = Math.acos(dist)
    dist = dist * 180 / Math.PI
    dist = dist * 60 * 1.1515
    dist = dist * 1.609344;
   
    if (dist > 0 && dist <= 100) {
        var dist = Math.round(dist) == 0 ? 1 : Math.round(dist);
      $('#store_' + unit).html('Approx ' + Math.round(dist) + ' km away')
     $('.store-distance').html(' Store '+ Math.round(dist) + ' Km away ')
     $('#store_' + unit).parent().parent().parent().attr('data-sort',Math.round(dist));
      $('.store-distance').show();
    }else{
        $('.store-distance').hide();
    }
  
  }

  function initializeMap(pin) {
        geocoder = new google.maps.Geocoder();
       var inputText = pin;
       console.log(inputText)
        geocode({ address: inputText})
    }



   function geocode(request) {
     console.log(request)
     geocoder
       .geocode(request)
       .then((result) => {
         const { results } = result;

        let s = JSON.parse(JSON.stringify(result.results[0]['geometry']['location'])); 
        setCookie('latnew', s.lat,1)
        setCookie('lngnew', s.lng,1)
        return results;
       })
       .catch((e) => {
         console.log("Geocode was not successful for the following reason: " + e);
       });
   }