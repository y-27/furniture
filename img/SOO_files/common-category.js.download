const clear_button='<li class="clear-all" id="clareAll" onclick="FilterCall($(this),\'clear\');" > <a href="javascript:;" >Clear All</a></li>';var isMob=false;if($(window).width()<767){var isMob=true;}
const urlParams=new URLSearchParams(window.location.search);const sort=urlParams.get('sort');const order=urlParams.get('order');const brands=urlParams.get('brand');const filter=urlParams.get('filter');const discount=urlParams.get('discount');const pricerange=urlParams.get('pricerange');const cat=$('#category');const cat_id=cat.val();const sale=cat.attr('data-sale');const main_url=cat.attr('data-keyword');const menuLeft=cat.attr('data-menuLeft');const removeFilter=cat.attr('data-removeFilter');const parent_cat_info=cat.attr('data-parentCat');const category_idPath=cat.attr('data-catIds');const filterHomeDecor=cat.attr('data-menuLeft');var change=previous=0,d=1;var checkfilter=0;if(brands!=null||filter!=null||pricerange!=null){const filtercount=$('#category').attr('data-filtercount');if(filtercount){filterCount(filtercount);}
var apendcustHtml="";if(pricerange!=null){var pricearray=pricerange.split(",");$.each(pricearray,function(i){var appendId=$('#'+pricearray[i]).attr('id');callIdfilt=appendId;apendcustHtml+='<li>'+callIdfilt+'<a href="javascript:void(0)"><img onclick="uncheck2(\'-'+pricearray[i]+'\',$(this))" src="images/sort-close-icon.png" alt="close" ></a></li>';});}
if(brands!=null){var brand=brands.split(",");$.each(brand,function(i){var appendId=$('#'+brand[i]).attr('id');callIdfilt=capitalize(appendId);apendcustHtml+='<li>'+callIdfilt+'<a href="javascript:void(0)"><img onclick="uncheck2(\'-'+callIdfilt+'\',$(this))" src="images/sort-close-icon.png" alt="close" ></a></li>';});}
if(filter!=null){var array=filter.split(",");$.each(array,function(i){var filt=array[i].split('-');var appendId=$('.aftercall_-'+filt[1]).attr('id');callIdfilt=capitalize(appendId);apendcustHtml+='<li>'+callIdfilt+'<a href="javascript:void(0)"><img onclick="uncheck2(\'-'+filt[1]+'\',$(this))" src="images/sort-close-icon.png" alt="close" ></a></li>';});}
apendcustHtml+=clear_button;$('.filter-result').append(apendcustHtml);}
window.onbeforeunload=function(){window.scrollTo(0,0);}
$(':input').on('input',function(){$(this).css('border-color','');});function submitfeedback(){var feedbackstatus=$('input[name=feedbackstatus]:checked').val();var feedback=$('textarea[name=feedback]').val();var feedback1=$('textarea[name=feedback1]').val();var issue=$('select[name=issue]').find(":selected").val();if(feedbackstatus=='no'){var message='Reason = '+issue+'<br> Feedback = '+feedback;if(feedback==''){$('textarea[name=feedback]').css('border-color','red');return false;}else{$('textarea[name=feedback]').css('border-color','');}}else{var message='Feedback = '+feedback1;if(feedback1==''){$('textarea[name=feedback1]').css('border-color','red');return false;}else{$('textarea[name=feedback1]').css('border-color','');}
if(feedbackstatus=='no'&&issue==''){$('select[name=issue]').css('border-color','red');return false;}else{$('select[name=issue]').css('border-color','');}}
$.ajax({url:'index.php?route=common/footer/issueSubmit',type:'POST',data:{request_type:"callback",message:message,},success:function(e){if(e!=0){$('textarea[name=feedback]').val('');$('textarea[name=feedback1]').val('');$('input[name=issue]').val('');$(thanksHTML).appendTo('body');$("#thanksMsgCommon").swpmodal({closeOnEsc:false,closeOnOverlayClick:false,afterClose:function(){$("#thanksMsgCommon").remove();}}).show();}else{}}});}
$('input[name=feedbackstatus]').change(function(event){var value=$(this).val();if(value=='yes'){$('#Select').show();$('#issueSelect').hide();}else{$('#issueSelect').show();$('#Select').hide();}});$(document).on('click','.finishopt',function(e){e.preventDefault();var product_id=$('#'+$(this).attr('data-key')).val();$.ajax({url:"index.php?route=product/category/getSimilarProduct",type:"POST",data:{product_id:product_id,}}).done(function(data){var liHtml='';var m=msyb='';if(($.inArray($('#category').val(),[1545,1546,1547])!=-1)){msyb="/M";m='/Meter';}
const d=new Date();let time=d.getTime();var productFinish=JSON.parse(data);for(product_finsh of productFinish){if(!isMob){liHtml+=`<li>
                    <div class="col" id="article_${product_finsh.product_id}">
                    <a href="${product_finsh.href}" class="targetBlank" target="_blank">
                        <figure>
                            <img src="${product_finsh.image}" class="lazy loaded pimages" title="${product_finsh.name}" alt="${product_finsh.alt}" border="0" data-was-processed="true">
                        </figure>
                    </a>
                    <div class="cart-hover">
                        <div class="cart-btn" onclick="addToCart($(this),${product_finsh.product_id});">Add to Cart</div>
                    </div>
                    <div class="wishlist-icon" onclick="addToWishList($(this),${product_finsh.product_id});">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12.8975 4.64753L12 5.54505L11.2975 4.84257C9.18777 2.73281 5.66395 2.37138 3.36664 4.43965C2.79823 4.95012 2.33976 5.57102 2.01919 6.26448C1.69854 6.95811 1.52257 7.7098 1.50203 8.47368C1.48149 9.23756 1.6168 9.99762 1.89971 10.7075C2.18262 11.4173 2.60719 12.0621 3.14752 12.6025L3.14753 12.6025L10.9393 20.3943C11.2206 20.6756 11.6022 20.8336 12 20.8336C12.3978 20.8336 12.7794 20.6756 13.0607 20.3943L20.6574 12.7975C22.7672 10.6878 23.1286 7.16394 21.0604 4.86664C20.5499 4.29823 19.929 3.83976 19.2355 3.51919C18.5419 3.19854 17.7902 3.02257 17.0263 3.00203C16.2624 2.98149 15.5024 3.1168 14.7925 3.39971C14.0827 3.68262 13.4379 4.10719 12.8975 4.64752L12.8975 4.64753Z" stroke="#FFFDF2" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                        </svg>
                    </div>
                    <div class="proud-box">
                        <a href="${product_finsh.href}" class="targetBlank" target="_blank">
                            <p class="heading">${product_finsh.name}</p>
                        </a>`;liHtml+=product_finsh.brand!=null?` <a href="${product_finsh.brandPath}" class="by-brand">By ${product_finsh.brand}</a>`:'';liHtml+=`<div class="flex-wrpr">
                            <div class="rating-box">`;if(product_finsh.rating>50){for($j=1;$j<=product_finsh.star;$j++){liHtml+='<i class="star"></i>';}
if((product_finsh.star).includes('.')){liHtml+='<i class="star star-half"></i>';$j++;}
while($j<=5){liHtml+='<i class="star star-gray"></i>';$j++;}
liHtml+=`<span class="rating-count">${product_finsh.Srating}</span>`;}
liHtml+='</div>\
                        </div>';if(product_finsh.special_price!=product_finsh.price&&product_finsh.price){liHtml+=`<div class="price"><strong>${product_finsh.special_price}</strong><del class="off-price">${product_finsh.price}</del><span class="orange">${product_finsh.discount} off</span> </div>`;}else{liHtml+='<div class="price"><strong>'+product_finsh.price+'</strong></div>';}
liHtml+='</div>';var date=Date.parse(product_finsh.date_added);var datediff=(time-date)/(1000*60*60*24);var dis=product_finsh.discount;if(product_finsh.sale_status==1){liHtml+='<div class="best-seller sale"><img src="images/category-new/salelabour.svg" alt="tag"/>Best Seller</div>';}else if(dis.replace('%','',)>50){liHtml+=`<div class=" deal best-seller">
                                    <img src="images/category-new/tag.svg" alt="tag">
                                    <label>${product_finsh.discount}</label>
                                </div>`;}else if(datediff<90){liHtml+='<div class="best-seller new sale"><img src="images/category-new/salelabour.svg" alt="tag"/>New </div>';}
liHtml+='</div>\
                </li>';}else{liHtml+=`<li class="product_single" id="article_${product_finsh['product_id']}">
                <a href="${product_finsh['href']}">
                    <figure> 
                        <img src="${product_finsh['image']}" title="${product_finsh['name']}" alt="${product_finsh['alt']}">
                    </figure>
                    <div class="catproduct-detail">
                        <p class="product_name">${product_finsh['name']} </p>`;if(product_finsh['brand']!=null){liHtml+=`<span class="by-brand" data-url="${product_finsh['brandPath']}">By ${product_finsh['brand']} </span>`;}
if(product_finsh['special_price']){liHtml+=`<p class="price-tag">${product_finsh['special_price']+m}<del class="off-price">${product_finsh['price']+msyb}</del><span class="discount-tag">${product_finsh['discount']}  Off</span></p>`;}else liHtml+="<strong>"+product_finsh['price']+"</strong>";liHtml+=`</div>`;var date=Date.parse(product_finsh.date_added);var datediff=(time-date)/(1000*60*60*24);var dis=product_finsh.discount;if(product_finsh.sale_status==1){liHtml+='<div class="best-seller sale"><img src="images/category-new/salelabour.svg" alt="tag"/>Best Seller</div>';}else if(dis.replace('%','',)>50){liHtml+=`<div class=" deal best-seller">
                                    <img src="images/category-new/tag.svg" alt="tag">
                                    <label>${product_finsh.discount}</label>
                                </div>`;}else if(datediff<90){liHtml+='<div class="best-seller new sale"><img src="images/category-new/salelabour.svg" alt="tag"/>New </div>';}
liHtml+=`</a>
                <div class="flex-wrpr">`;if(product_finsh['rating']>50){liHtml+=`<div class="rating-box"> <span class="total-rate">${product_finsh['star']}<i class="fa fa-star"></i></span>
                            <span class="rate-text">${product_finsh['Srating']}</span></div>`;}
liHtml+=`</div></li>`;}}
if(!isMob){$('.finish-slider').html(liHtml);$('.finish-popup').show().swpmodal({closeOnEsc:false,closeOnOverlayClick:false}),$('body').addClass('noscroll');$('.finish-slider').slick({arrows:true,slidesToShow:3,slidesToScroll:3,responsive:[{breakpoint:992,settings:{slidesToShow:2,arrows:false,dots:true}},{breakpoint:767,settings:"unset"}]});}else{$('.overlay').addClass('active');$("body").addClass('no-scroll');$('#popup-finish-list').html(liHtml);$('.finish-popup').show().css({bottom:'0'});}});});$('.swpmodal-close,.close-popup').on('click',function(){if(isMob){$('.overlay').removeClass('active');$("body").removeClass('no-scroll');$('#popup-finish-list').html();$('.finish-popup').hide().animate({bottom:'-100%'});}else{setTimeout(function(){$('.finish-popup').hide();$('.finish-slider').html('').slick('destroy');},500);}})
function filterCount(filtercount){if(filtercount.discount){$(document).find('.discount').each(function(index,ele){if(!isMob){$(ele).parent().parent().removeClass('disabled');}else{$(ele).parent().removeClass('disabled');}
var id=parseInt(discount.split('-')[0]);var checkdis=0;$.each(filtercount.discount,function(index,ele11){if(id&&id==ele11){checkdis=1;}});if(checkdis==0&&id){if(!isMob){$(ele).parent().parent().addClass('disabled');}else{$(ele).parent().addClass('disabled');}}});if(ll<6){$.each($('.discount'),function(i,e){if($(e).val()!=discount){if(!isMob){$(e).parent().parent().addClass('disabled');}else{$(e).parent().addClass('disabled');}}
if($(e).val()==''){if(!isMob){$(e).parent().parent().removeClass('disabled');}else{$(e).parent().removeClass('disabled');}}})}}
if(filtercount.price){$(document).find('.pcounts .product_count').each(function(index,ele){var id=$(ele).attr('id');var grpid=$(ele).attr('data-grp');if(!isMob){$(ele).parent().parent().removeClass('disabled');}else{$(ele).parent().removeClass('disabled');}
if(grpid==2){var pricekeys=id.split("-");var count=0
$.each(filtercount.price,function(index,ele1){if(pricekeys[0]=='Under'&&parseInt(index)<=pricekeys[1]){count+=ele1;}else if(pricekeys[0]=='Over'&&parseInt(index)>=pricekeys[1]){count+=ele1;}else if(parseInt(index)<=pricekeys[1]&&parseInt(index)>=pricekeys[0]){count+=ele1;}});if(!$(".grp"+grpid).hasClass('active')){$(ele).text('('+count+')');if(count==0){if(!isMob){$(ele).parent().parent().addClass('disabled');}else{$(ele).parent().addClass('disabled');}}}}
var counter=0;if(id.indexOf("_")!=-1&&!$(".grp"+grpid).hasClass('active')){var ids=id.split('_');for(let l of ids){if(typeof(filtercount.filter[l])!="undefined")
counter=parseInt(counter)+parseInt(filtercount.filter[l]);}
$(ele).text('('+counter+')');}else if(grpid!=2&&typeof(filtercount.filter[id])!="undefined"&&!$(".grp"+grpid).hasClass('active')){$(ele).text('('+filtercount.filter[id]+')');}else if(grpid!=2&&(!$(".grp"+grpid).hasClass('active')||$(ele).text()=='(0)')){if(!isMob){$(ele).parent().parent().addClass('disabled');}else{$(ele).parent().addClass('disabled');}
$(ele).text('('+0+')');}});}}
function RemovefilterCount(filtercount){if(filtercount.discount){$(document).find('.discount').each(function(index,ele){if(!isMob){$(ele).parent().parent().removeClass('disabled');}else{$(ele).parent().removeClass('disabled');}
var id=parseInt(discount.split('-')[0]);var checkdis=0;$.each(filtercount.discount,function(index,ele11){if(id&&id==ele11){checkdis=1;}});if(checkdis==0&&id){if(!isMob){$(ele).parent().parent().addClass('disabled');}else{$(ele).parent().addClass('disabled');}}});if(ll<6){$.each($('.discount'),function(i,e){if($(e).val()!=discount){if(!isMob){$(e).parent().parent().addClass('disabled');}else{$(e).parent().addClass('disabled');}}
if($(e).val()==''){if(!isMob){$(e).parent().parent().removeClass('disabled');}else{$(e).parent().removeClass('disabled');}}})}}
if(filtercount.price){$(document).find('.pcounts,.product_count').each(function(index,ele){var id=$(ele).attr('id');$(' .m-fiopen span').removeClass('disabled');var grpid=$(ele).attr('data-grp');if(!isMob){$(ele).parent().parent().removeClass('disabled');}else{$(ele).parent().removeClass('disabled');}
if(grpid==2&&!$(".grp2").hasClass('active')){var pricekeys=id.split("-");var count=0
$.each(filtercount.price,function(index,ele1){if(pricekeys[0]=='Under'&&parseInt(index)<=pricekeys[1]){count+=ele1;}else if(pricekeys[0]=='Over'&&parseInt(index)>=pricekeys[1]){count+=ele1;}else if(parseInt(index)<=pricekeys[1]&&parseInt(index)>=pricekeys[0]){count+=ele1;}});$(ele).text('('+count+')');if(count==0){if(!isMob){$(ele).parent().parent().addClass('disabled');}else{$(ele).parent().addClass('disabled');}}}
var counter=0;if(id.indexOf("_")!=-1){var ids=id.split('_');for(let l of ids){if(typeof(filtercount.filter[l])!="undefined")
counter=parseInt(counter)+parseInt(filtercount.filter[l]);else{console.log(l)}}
$(ele).text('('+counter+')');}else if(grpid!=2&&typeof(filtercount.filter[id])!="undefined"){$(ele).text('('+filtercount.filter[id]+')');}else if(grpid!=2&&(!$(".grp"+grpid).hasClass('active')||$(ele).text()=='(0)')){if(!isMob){$(ele).parent().parent().addClass('disabled');}else{$(ele).parent().addClass('disabled');}
$(ele).text('('+0+')');}else{if($(ele).text()=='(0)'){if(!isMob){$(ele).parent().parent().addClass('disabled');}else{$(ele).parent().addClass('disabled');}
$(ele).text('('+0+')');}else{if(!isMob){$(ele).parent().parent().removeClass('disabled');}else{$(ele).parent().removeClass('disabled');}}}});}}
$(".show-more").click(function(){$('.category-more-toogle').toggleClass('active');});if(!isMob){$(document).bind('scroll',function(e){$('.lazytestimonial').each(function(){$(this).attr('src',$(this).attr('data-src')).addClass('loaded');;});end=$('#category').attr('data-keyword');$('.load-product-item').each(function(c){c=c+1;if($(this).offset().top<window.pageYOffset+10&&$(this).offset().top+$(this).height()>window.pageYOffset+10){var current=window.pageYOffset+10;$('.lazy,.lazy1').each(function(){$(this).attr('src',$(this).attr('data-src'));});$('.offer-mid .lazy').addClass('loaded');if(c==1&&change==1&&window.history==1){}else{if(d<c){change=1;window.history.pushState('yes','may b',end+'?pages='+c);d=d+1;}else if(current<previous&&(d==c||d>c)){if(d>c){change=1;window.history.pushState('yes','may b',end+'?pages='+c);d=d-1;}}
previous=current;}}
$('.lazy,.lazy1').each(function(){$(this).attr('src',$(this).attr('data-src'));});});});}
$(document).on('change','input[name=fast-ship]',function(){if(!$(this).is(':checked')){$(this).removeAttr('checked');fastShip='';FilterCall($(this),'remove',fastShip);}else{fastShip=$(this).val();$(this).attr('checked','checked');FilterCall($(this),'',fastShip);}});$(document).on('click','input[name=sortingRadio]',function(){FilterCall($(this),'');});$(document).on('click','input[name="checked_dynamic[]"]',function(){if($(this).is('checked'))FilterCall($(this),'');else FilterCall($(this),'');});function capitalize(word){const arr=word?.split("_");for(var i=0;i<arr?.length;i++){arr[i]=arr[i].charAt(0).toUpperCase()+arr[i].slice(1);}
const str2=arr?.join(" ");return str2;}
$('.grid-button').click(function(){$('.fulllistview').toggleClass('grid');$(this).toggleClass('view');});function FilterCall(d,h,fastShip=''){$('input[type=checkbox]').removeClass('active');var pricerange=Array();$('.PriceRange:checked').each(function(){pricerange.push($(this).attr('id'));$(this).addClass('active')});var dynmaciChecked=Array();$('.DynamicFlt:checked').each(function(){dynmaciChecked.push($(this).val());$(this).addClass('active')});var discountChecked=Array();$('.discount:checked').each(function(){discountChecked.push($(this).val());$(this).addClass('active')});var brandChecked=Array();$('.brand:checked').each(function(){brandChecked.push($(this).attr('id'));$(this).addClass('active')});var idas=dynmaciChecked.join(',');var discount=discountChecked.join(',');var pricerange=pricerange.join(',');var brand=brandChecked.join(',');if($('#category').attr('data-brand')){var brand=$('#category').attr('data-brand');}
$('.filter-result').html('');var rows=document.getElementsByName('checked_dynamic[]');var lenthCount=rows.length;var count=-1;for(var i=0,l=lenthCount;i<l;i++){if(rows[i].checked){var filt33=rows[i].value.split('-');var final=(filt33.length>2)?'-'+filt33[1]+'-'+filt33[2]:'-'+filt33[1];var filt2=capitalize(rows[i].id);var filt=filt2;count++;$('.filter-result').append('<li>'+filt+'<a href="javascript:void(0)"><img onclick="uncheck2(\''+final+'\',$(this))" src="images/sort-close-icon.png" alt="close" ></a></li>');}}
if(count>0){$('.toptool').remove();$('.filterslide').append('<span class="toptool" style="">'+count+'</span>');}
var clear=0;if(h=="clear"){var clear=1;$('#clareAll').hide();$('.filter-result').html("");d.css('pointer-events','none');$('.sortBy').removeAttr('style');$('.DynamicFlt, .discount, .PriceRange, .brand').prop('checked',false).parent().removeClass('active');$('.DynamicFlt, .discount, .PriceRange, .brand, .Material, .FINISH, .SEATER, .Color, .BRAND, .DISCOUNT, .Type, .STORAGE, .PIECES, .SIZE, .THICKNESS, .DIMENSION, .FEATURES').children().children().children().removeClass('disabled');$('#PRICE, #DynamicFlt, #discount, #PRICE_RANGE, #brand, #Material, #FINISH, #SEATER, #Color, #BRAND, #DISCOUNT, #Type, #Storage_Type,#STORAGE, #SET_PIECES, #SIZE, #THICKNESS, #DIMENSION, #FEATURES').children().children().removeClass('disabled');$('#none').prop('checked',true).parent().addClass('active');idas=discount=pricerange=brand='';}else{if($('.filter-result li').length==0){$('#clareAll').hide();$('.DynamicFlt, .discount, .PriceRange, .brand, .Material, .FINISH, .SEATER, .Color, .BRAND, .DISCOUNT, .Type, .STORAGE, .PIECES, .SIZE, .THICKNESS, .DIMENSION, .FEATURES').children().children().children().removeClass('disabled');$('#DynamicFlt, #discount, #PRICE_RANGE, #brand, #Material, #FINISH, #SEATER, #Color, #BRAND, #DISCOUNT, #Type, #Storage_Type,#STORAGE, #SET_PIECES, #SIZE, #THICKNESS, #DIMENSION, #FEATURES').children().children().removeClass('disabled');}else{$('#clareAll').show();$('#clareAll').css('pointer-events','');$('.filter-result').append(clear_button);}}
if(d.find('.SortingFilter').prop('checked')){d.find('.SortingFilter').prop('checked',false);}else{d.find('.SortingFilter').prop('checked',true).attr('checked');}
sortview=$("input[name=sortingRadio]:checked").val();var sortby=orderBy="";if(sortview&&clear==0&&fastShip==''){d.parent().parent().siblings().find('.Sort-Filter').removeClass('active checked').css('pointer-events','');var customSort=sortview.split('-');sortby=customSort[0];orderBy=customSort[1];d.addClass('active checked');if(!isMob){d.addClass('active');$('.DynamicFlt').each(function(){if($(this).prop('checked')==false){$(this).removeClass('active');$(this).removeClass('checked');}});}else{$("body").removeClass('no-scroll');$(".overlay").removeClass('active');$('.sortfilter-box').animate({bottom:'-100%'});}}else if(clear==1&&fastShip==''){$('article.SortBy > div > label:first-child > input.SortingFilter').parent().parent().siblings().find('.Sort-Filter').removeClass('active checked').css('pointer-events','').removeAttr('checked');$('article.SortBy > div > label:first-child > input.SortingFilter').addClass('active checked').css('pointer-events','none ');}else if(h!='rangeslider'&&fastShip==''){d.parent().parent().siblings().find('.Sort-Filter').removeClass('active checked').css('pointer-events','');}
$.ajax({url:"index.php?route=product/category/customfilter",type:"GET",dataType:"json",data:{type:sale,cat_id:cat_id,customfilter:1,parent_cat_info:parent_cat_info,sort:sortby,filter:idas,brand:brand,order:orderBy,discount:discount,pricerange:pricerange,fastShipVal:fastShip,},beforeSend:function(){$('body').prepend("<div class='transparentImg'></div>");},}).done(function(msg){$('.filter-loader').remove();var x="";if(cat_id)x+='catid='+cat_id;if(idas)x+='&filter='+idas;if(brand)x+='&brand='+brand;if(sortby)x+='&sort='+sortby;if(orderBy)x+='&order='+orderBy;if(discount)x+='&discount='+discount;if(fastShip)x+='&fastShipVal='+fastShip;if(pricerange)x+='&pricerange='+pricerange;if(x==''||clear==1){url=main_url;}else{url=main_url+'?'+x;}
if(typeof(history.pushState)!="undefined"){var obj={Url:url};history.pushState(obj,obj.Title,obj.Url);}else{alert("Browser does not support HTML5.");}
$('.transparentImg').remove();var datass='';if(msg!=''){var filtercount=msg.filtercount;if(filtercount){RemovefilterCount(filtercount);}
var datass='';if(msg.products!=''||msg.products.length>0){if(isMob){datass+=getMoblieHtml(msg.products,msg.section_display);}else{datass+='<div class="load-product-new"><div class="load-product-item flex cattwo '+$('#category').attr('data-viewclass')+'">';datass+=getDesktopHtml(msg.products,msg.section_display);datass+='</div><div>';}}else{datass+=' <div class="col_main FilterResult ">\
                <article id="article" class="big-beds not-found">\
                <figure><img class="lazy" src="images/category-new/not-found.svg" alt=""/> </figure>\
                <p>We don'+"'"+'t have any items that match your filters.</p>\
                <a href="javascript:;"  onclick="FilterCall($(this),\'clear\');" class="btn">Reset all Filters</a>\
                </article>\
                </div>';}
$('.FilterResult, .mobile-product-list').html(datass);updateCategoryLazyLoad();}else{$('.FilterResult').html(' <div class="col_main FilterResult ">\
            <article id="article" class="big-beds not-found">\
            <figure><img class="lazy" src="images/category-new/not-found.svg" alt=""/> </figure>\
            <p>We don'+"'"+'t have any items that match your filters.</p>\
            <a href="javascript:;"  onclick="FilterCall($(this),\'clear\');" class="btn">Reset all Filters</a>\
            </article>\
            </div>');}
var len=$('#filter-slider article').length;if(len>0){$("html, body").stop().animate({scrollTop:500},500);}else{$("html, body").stop().animate({scrollTop:300},500);}});}
function getDesktopHtml(msg,section_display){datass='';var checkval=0;checkval=5;for(var i=0;i<msg.length;i++){console.log(msg[i].thumb,msg[i].thumb2,msg[i].name);datass+=`<div class="col" id="article_${msg[i].product_id}">
            <a href="${msg[i].href}" class="targetBlank" target="_blank">
                <figure>`;if(msg[i].thumb){datass+=`<img onerror="this.src='${msg[i].thumb}'" class="loaded" src="${msg[i].thumb2}" title="${msg[i].name}" alt="${msg[i].alt!=''?msg[i].alt:msg[i].name}" border="0" />`;}
wishlistActive=msg[i].isWishlist==1?'active':'';datass+=`</figure>
            </a>
            <div class="cart-hover">
                <p class="cart-btn" onclick="addToCart($(this),${msg[i].product_id});"> Add to Cart</p >
            </div>
            <div class="wishlist-icon ${wishlistActive}" onclick="addToWishList($(this),${msg[i].product_id});">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12.8975 4.64753L12 5.54505L11.2975 4.84257C9.18777 2.73281 5.66395 2.37138 3.36664 4.43965C2.79823 4.95012 2.33976 5.57102 2.01919 6.26448C1.69854 6.95811 1.52257 7.7098 1.50203 8.47368C1.48149 9.23756 1.6168 9.99762 1.89971 10.7075C2.18262 11.4173 2.60719 12.0621 3.14752 12.6025L3.14753 12.6025L10.9393 20.3943C11.2206 20.6756 11.6022 20.8336 12 20.8336C12.3978 20.8336 12.7794 20.6756 13.0607 20.3943L20.6574 12.7975C22.7672 10.6878 23.1286 7.16394 21.0604 4.86664C20.5499 4.29823 19.929 3.83976 19.2355 3.51919C18.5419 3.19854 17.7902 3.02257 17.0263 3.00203C16.2624 2.98149 15.5024 3.1168 14.7925 3.39971C14.0827 3.68262 13.4379 4.10719 12.8975 4.64752L12.8975 4.64753Z" stroke="#FFFDF2" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
            </div>
            <div class="proud-box">
                <a href="${msg[i].href}" class='heading'>${msg[i].name}</a>
                <a href="${msg[i].brandPath}" class="by-brand">By ${msg[i].brand}</a>
                <div class="flex-wrpr">
                    <div class="rating-box">`;if(msg[i].rating>50){for($j=1;$j<=msg[i].star;$j++){datass+='<i class="star"></i>';}
if((msg[i].star).includes('.')){datass+='<i class="star star-half"></i>';$j++;}
while($j<=5){datass+='<i class="star star-gray"></i>';$j++;}
datass+='<span class="rating-count">'+msg[i].shortrating+'</span>';}
datass+=`</div>`;var m=msyb='';if(($.inArray($('#category').val(),[1545,1546,1547])!=-1)){msyb="/M";m='/Meter';}
count=msg[i].smilar_product_id.length;if(count>1){datass+=`<div class="color-filters" >
            <input type='hidden' id="${msg[i].product_id}" value='${msg[i].smilar_product_id.join(',')}'>`;for(simlar in msg[i].smilar_product_id){var img=msg[i].smilar_product_icon[simlar];if(img&&img.indexOf('jpg')!==-1){if(simlar<4){datass+=`<a href="${msg[i].smilar_product_url[simlar]}"><i><img class="" src="${msg[i].s3url+msg[i].smilar_product_icon[simlar]}" alt=""/></i> </a>`;}else{datass+=`<small data-key="${msg[i].product_id}" class="finish-count finishopt">+${(count-simlar)}</small>`;break;}}}
datass+='</div>';}
datass+='</div>';datass+='<div class="price">';if(msg[i].special!=msg[i].price&&msg[i].price){datass+="<strong>"+msg[i].special+m+"</strong><del class='off-price'>"+msg[i].price+msyb+"</del><span class='orange'>"+msg[i].discountPersent+" off</span>";}else{datass+="<strong>"+msg[i].price+"</strong>";}
if(msg[i].emiFrom>400){datass+='<p>EMI From <span>'+msg[i].emiFrom+'</span></p>';}
if(msg[i].quantity>9){datass+='<span class="ship"><img src="images/category-new/ship.svg" alt="ship icon"/> Ships in 2 Days</span>';}else if(msg[i].quantity>7&&msg[i].quantity<9){datass+='<span class="ship"><img src="images/category-new/ship.svg" alt="ship icon"/> Ships in 7 Days</span>';}else if(msg[i].est_shipping!=''&&msg[i].est_shipping<10&&msg[i].est_shipping>1){datass+='<span class="ship"><img src="images/category-new/ship.svg" alt="ship icon"/> Ships in '+msg[i].est_shipping+' Days</span> ';}
datass+=`</div></div>`;const d=new Date();let time=d.getTime();var date=Date.parse(msg[i].date_added);var datediff=(time-date)/(1000*60*60*24);var dis=msg[i].discountPersent;if(msg[i].sale_status==1){datass+='<div class="best-seller sale"><img src="images/category-new/salelabour.svg" alt="tag"/>Best Seller</div>';}else if(dis.replace('%','',)>50){datass+=`<div class=" deal best-seller">
                            <img src="images/category-new/tag.svg" alt="tag">
                            <label>${msg[i].discountPersent}</label>
                        </div>`;}else if(datediff<90){datass+='<div class="best-seller sale new"><img src="images/category-new/salelabour.svg" alt="tag"/>New </div>';}
datass+=`</div>`;if(i!=0&&i==checkval){var view=i+1;datass+='<figure class="offer-mid offer'+view+'"><img style=" opacity: 1;" src="images/offer/strip-furniture.jpg?v='+Math.random(0,10)+'" alt="Buy '+$('#category').attr('data-name')+' online"/></figure>';}}
return datass;}
function getMoblieHtml(products,section_display){datass='';i=0;var cnt=1;var checkval=0;checkval=7;totalproduct=products.length;for(product of products){datass+=`<li class="product_single" id="article_${product['product_id']}">
            <a href="${product['href']}">
                <figure>`;if(product['thumb']){datass+=`<img class="lazy"  src="${product['thumb']}" title="${product['name']}" alt="${product['alt']!=''?product['alt']:product['name']}">`;}else{datass+=`<img  class="lazy" src="mobile/images-m/no-image.jpg" alt="no image">`;}
datass+=`</figure>
                <div class="catproduct-detail">
                    <p class="product_name">${product['name']} </p>`;if(product['brand']!=null){datass+=`<span class="by-brand" data-url="${product['brandPath']}">By ${product['brand']} </span>`;}
m=msyb='';if(($.inArray($('#category').val(),[1545,1546,1547])!=-1)){msyb="/M";m='/Meter';}
if(product['special']){datass+=`<p class="price-tag"><span class="product-price">${product['special']+m}</span>
                            <del class="off-price">${product['price']+msyb}</del>
                            <span class="discount-tag">${product['ourDis']}  Off</span>
                        </p>`;}else datass+="<strong>"+product['price']+"</strong>";datass+=`</div>`;const d=new Date();let time=d.getTime();var date=Date.parse(product['date_added']);var datediff=(time-date)/(1000*60*60*24);var dis=product['discountPersent'];if(product['sale_status']==1){datass+='<span class="best-seller sale">Best Seller </span>';}else if(dis.replace('%','')>50){datass+=`<div class=" deal best-seller"><img src="images/category-new/tag.svg" alt="tag" /><label>${product['discountPersent']}</label></div>`;}else if(product['sale_status']==2){datass+='<span class="best-seller sale new">New </span>';}
datass+=`</a>`;datass+=' <div class="flex-wrp">';if(product['rating']>50){datass+=`<div class="rating-box"><span class="total-rate">${parseFloat(product['star']).toFixed(1)}<i class="fa fa-star"></i></span>
                        <span class="rate-text">(${product['shortrating']})</span> </div>`;}
count=product.smilar_product_icon.length;if(count>1){datass+=` <div class="color-filters">
            <input type='hidden' id="${product['product_id']}" value='${product['smilar_product_id'].join(',')}'>`;for(simlar in product.smilar_product_id){var img=product.smilar_product_icon[simlar]
if(img&&img.indexOf('jpg')!==-1){if(simlar<2){datass+=`<a href="${product.smilar_product_url[simlar]}"><i><img  data-key="${product.product_id}" class="finishopt" src="${product.s3url+product.smilar_product_icon[simlar]}" alt=""/></i> </a>`;}else{datass+=`<small data-key="${product.product_id}" class="finish-count finishopt">+${(count-simlar)}</small>`;break;}}}
datass+=`</div>`;}
datass+='</div>';datass+=`</div>`;if(product['quantity']>9)product['est_shipping']=2;else if(product['quantity']>7&&product['quantity']<9)product['est_shipping']=7;else if(product['est_shipping']==''||product['est_shipping']>15)product['est_shipping']='';datass+=(product['est_shipping']!='')?(`<div class="fast-delivery"><img src="mobile/images-m/category-new/ship.svg?v=2" alt="ship" class="fastD"/><small>Ships in ${product['est_shipping']} Days</small></div>`):'';wishlistActive=product['isWishlist']==1?'active':'';current_list=product['isWishlist']==1?'current':'';datass+=`<div class="wishlist-btn wBtn_${product['product_id']} ${wishlistActive}" onclick="addToWishList($(this),'${product['product_id']}');">
                <span class="wishlist-product ${product['product_id']} ${current_list}">
                    <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M11.4861 18.2086L18.4499 11.2449C20.1609 9.53387 20.4133 6.71893 18.7941 4.92075C18.3885 4.46904 17.8951 4.10469 17.3441 3.84995C16.793 3.59521 16.1959 3.45542 15.589 3.4391C14.9821 3.42278 14.3783 3.53028 13.8143 3.75503C13.2504 3.97979 12.7382 4.31709 12.3089 4.74636L11 6.05522L9.86993 4.92515C8.15889 3.21409 5.34395 2.96166 3.54577 4.58089C3.09405 4.98648 2.72971 5.47986 2.47497 6.03091C2.22023 6.58196 2.08043 7.17914 2.06412 7.78601C2.0478 8.39287 2.15529 8.9967 2.38005 9.56065C2.6048 10.1246 2.94211 10.6368 3.37137 11.0661L10.5139 18.2086C10.6428 18.3376 10.8177 18.41 11 18.41C11.1823 18.41 11.3572 18.3376 11.4861 18.2086V18.2086Z" stroke="#ffffff" stroke-linecap="round" stroke-width="1.5" stroke-linejoin="round" />
                    </svg>
                </span>
            </div>
        </li>`;if((i==11||i==17)&&totalproduct>18){datass+=`<li class="midcate middle_banner">
                <a href="offline-furniture-store?type=category_page" ><img src="mobile/images-m/category-new/stores-banner.jpg?v=${Math.random(0,9)}" alt="Stores Banner"></a>
            </li>`;}
if((cnt/strip==1)){console.log(cnt);datass+='<li class="product_cat_more"></li>';}
i++;cnt++;}
return datass;}
function addToCart(d,product_id){var postdata='product_id='+product_id+'&quantity=1';$.ajax({url:'index.php?route=checkout/cart/add',type:'post',data:postdata,dataType:'json',async:false,success:function(json){if(json['success']){d.text('Added In Cart').attr('onclick','');$('#add-name').html(d.parents().find('.heading').html());$('.cartpopup').css('bottom','20%');$('#cart-total').html(json['total']);setTimeout(function(){$('.cartpopup').css('bottom','-20%');},3000);}
if(json['error']){d.next().children('span').text('Cart Full');}}});}
var who='';function addToWishList(d,product_id){if(typeof(logged)=='boolean'&&!logged){if(isMob){var wishListObj={product_id,who,};setCookie('wishListObj',JSON.stringify(wishListObj),7);window.location='login';}else{setTimeout(function(){$("#register_form_pop").append('<input type="hidden" name="SourceId" value="72">');},3000);who=d;var wishListObj={product_id,d};$.cookie('wishListObj',JSON.stringify(wishListObj));showSingupPopup("header Sign in click","","login");}
return false;}else{if(!d)return false;var wishval='s'+product_id;if(d.hasClass('active')){var data='remove='+product_id;var request='index';}else{var data='product_id='+product_id;var request='add';}
$.ajax({url:'index.php?route=account/wishlist/'+request,type:'post',data:data,dataType:'json',success:function(json){if(json['success']){if(d.hasClass('active')){d.removeClass('active');d.find('.wishlist-product').removeClass('current');}else{d.addClass('active');d.find('.wishlist-product').addClass('current');}
if(isMob)
{if($("#w-cart").children(1).length==2){if(json['total']==0){$("#w-cart").find(".count").remove();}else{$('#w-cart .count').html(json['total']);}}else{var html="<small class='count'>"+json['total']+"</small>"
$("#w-cart").append(html);}}else{$('.whislist-cart .count').html(json['total']);}}}});}}
getFiltergroup();var htmlForFilter='';function getFiltergroup(){$.ajax({url:"index.php?route=product/category/callFilterGroup",type:"GET",cache:true,async:true,data:{sort:sort,end:main_url,order:order,brand:brand,filter:filter,discount:discount,category_id:cat_id,pricerange:pricerange,removeFilter:removeFilter,parent_cat_info:parent_cat_info,category_idPath:category_idPath,filterHomeDecor:filterHomeDecor},beforeSend:function(){$('#filterLoader').html('<img src="mobile/images-m/filter/filterloader.gif" alt="filter loader" class="filterLoaderPng"/>');}}).done(function(msg){var msg=JSON.parse(msg);var html='';html+='<ul class="category_list"><li>';$.each(msg,function(ind,ele){var ids=(ele.name).replace(" ",'_');html+='<a href="javascript:;" onclick="filterhideshow(\''+ids+'\')">'+ele.name+'</a>';});html+='</li></ul>';htmlForFilter=html;$('.product_cat_more').html(html);})}
function filterhideshow(ids){$('.filterslide').click();$(document).find('.ajaxFilterResult li').removeClass('active');$(document).find('.ajaxFilterResult .bxcover').children().hide();$(document).find('.ajaxFilterResult #'+ids+'').parent().addClass('active');$(document).find('.ajaxFilterResult #'+ids+'').children().show();}
$(".pagination").hide();$(".limit").hide();$(window).scroll(function(){$('.product_cat_more').html(htmlForFilter);$(document).find('.lazy,.lazy1').each(function(){$(this).attr('src',$(this).attr('data-src'));});if(!isMob){if($(this).scrollTop()>700){$('.filter_slider_main').addClass('fixed');$('.container-for-filter').addClass('sticky');}else{$('.filter_slider_main').removeClass('fixed');$('.container-for-filter').removeClass('sticky');}
$(".load-product").infinitescroll({loading:{img:"catalog/view/javascript/jquery/ocscroll/30.gif",msgText:"Loading new product...",finishedMsg:"No more product"},bufferPx:10,nextSelector:"div.pagination a:first",navSelector:"div.pagination",contentSelector:".load-product",itemSelector:".load-product-item",},function(){updateCategoryLazyLoad();});}else{if($('.selected').length==0){$(".fulllistview").infinitescroll({loading:{img:"catalog/view/javascript/jquery/ocscroll/30.gif",msgText:"Loading new product...",finishedMsg:"No more product"},bufferPx:10,nextSelector:"div.pagination a:first",navSelector:"div.pagination",contentSelector:"ul.fulllistview",itemSelector:"li.product_single",},function(event){updateCategoryLazyLoad();});}}});function uncheck2(txt,d){var text=(txt.split(' ').length>1)?txt.split(' ')[0]:txt;$('.aftercall_'+text).each(function(){$(this).prop('checked',false);FilterCall($(this),'');});d.parent().parent().remove();}
if(isMob){$(document).ready(function(){$(".m-more").click(function(){$('.m-title').toggleClass('active');});jQuery('.sort-btn, .overlay').click(function(){if(jQuery(this).hasClass('active')){jQuery(this).removeClass('active');$("body").removeClass('no-scroll');jQuery('.overlay').removeClass('active');jQuery('.short-by').animate({bottom:'-100%'});}else{jQuery('.overlay').addClass('active');jQuery('.short-by').animate({bottom:"0"});}
return false;});jQuery('.fitler-close,.apply-btn').click(function(){jQuery('.overlay').removeClass('active');$("body").removeClass('no-scroll');jQuery('.left-filter').animate({right:'-110%'});});$(document).on('click','.filter-header .resetbtn , .not-found .clearFilter',function(){$('.filterlinks input:checkbox').removeAttr('checked');$('.filterlinks input:radio').removeAttr('checked');$('#none').prop('checked',true);$('.bxcover').removeClass('selected')
$(".rightfilter").parents("li span").removeClass("selected");$('.toptool,.notfound').hide();$('.Sort-Filter').each(function(){if($(this).val()==''){$(this).attr('checked','checked');$(this).addClass('checked');}})
$('.totalproduct').html('<span class="filterLoader">Products Found</span>');FilterCall($(this),'checboxclick');$('.Sort-Filter').each(function(){if($(this).attr('checked')=='checked'){$(this).addClass('checked');}})});});$(document).one('touchstart',function(){var url="index.php?route=product/category/callFilter";var brand=brands;if(isbrandPage){var url="index.php?route=product/brand/callFilter";brand=$('#category').attr('data-brand');}
$.ajax({url:url,type:"GET",cache:true,async:true,data:{sort:sort,end:main_url,order:order,brand:brand,filter:filter,discount:discount,category_id:cat_id,pricerange:pricerange,removeFilter:removeFilter,parent_cat_info:parent_cat_info,category_idPath:category_idPath,filterHomeDecor:filterHomeDecor},beforeSend:function(){$('#filterLoader').html('<img src="mobile/images-m/filter/filterloader.gif" alt="filter loader" class="filterLoaderPng"/>');}}).done(function(msg){$('.filter-box').show();setTimeout(function(){$('.ajaxFilterResult').append(msg);filterOnLoad(cat_id);},300);if(filter||pricerange||brands){var apendcustHtml="";if(filter){var filtercustids=filter;var array=filtercustids.split(",");$.each(array,function(i){apendcustHtml+=$('.ajaxFilterResult :checkbox[value='+i+']').prop('checked',true);});}
if(pricerange){var pricecustids=pricerange;var pricearray=pricecustids.split(",");$.each(pricearray,function(i){apendcustHtml+=$('.ajaxFilterResult :checkbox[value='+i+']').prop('checked',true);});}
if(brands){var brandcustids=brands;var brand=brandcustids.split(",");$.each(brand,function(i){apendcustHtml+=$('.ajaxFilterResult :checkbox[value='+i+']').prop('checked',true);});}
$('.filter-result').append(apendcustHtml);}})});}else{$(document).one('mouseover',function(){$('.checkmark1').addClass('checkmark');$('.pimages').each(function(c){$(this).attr('src',$(this).attr('data-src'));});});$(document).ready(function(){$('.checkmark1').addClass('checkmark');$('.pimages').each(function(c){$(this).attr('src',$(this).attr('data-src'));});var cat=$('#category').val();var html=lislider=allbtn="";var current_slider=0;$('.topcat_slider').show();current_slider=current_slider+1;var initialSlide=0;if(current_slider>6){initialSlide=current_slider-5;}
$('.category-slider').slick({dots:false,infinite:false,speed:300,slidesToShow:6,slidesToScroll:1,initialSlide:initialSlide,responsive:[{breakpoint:1024,settings:{slidesToShow:4,slidesToScroll:1}}]});$('.customer-slider').slick({arrows:true,dots:false,autoplay:true,slidesToShow:3,slidesToScroll:1,responsive:[{breakpoint:992,settings:{slidesToShow:2,arrows:false,dots:true}},{breakpoint:767,settings:{slidesToShow:1,arrows:false,centerMode:true}}]});$('.store-slider').slick({arrows:true,dots:false,autoplay:true,slidesToShow:3,slidesToScroll:1,responsive:[{breakpoint:992,settings:{slidesToShow:3,arrows:false,dots:true}}]});});$(".sold-send p").click(function(){if($(this).hasClass("current")){$(this).removeClass("current");$(this).next(".sold-send form").slideUp(400);}else{$(".sold-send form").slideUp(400);$(".sold-send p").removeClass("current");$(this).addClass("current");$(this).next(".sold-send form").slideDown(400);}});$(document).on('click',".left-filter .drop",function(){$(this).toggleClass('active');$(this).next('.m-fiopen').slideToggle('slow');});$("#most-viewed").stick_in_parent({offset_top:60});}
function filterOnLoad(){$.ajax({url:'index.php?route=product/category/getFilterCategory',type:'POST',cache:true,async:true,dataType:'json',data:{category_id:cat_id,seo:'#!google_ajax'}}).done(function(msg){if(msg.length>0){if(msg[0].name!=''){html='<li class="" >\
                        <span class="box-cover bxcover" id="categories" >\
                           OTHER CATEGORIES\
                            <ul class="rightfilter m-fiopen" >';var li='';for(var i=0;i<msg.length;i++){if(msg[i].category_id){if(msg[i].category_id==cat_id){var clsss='active';}else{var clsss='';}
li+='<li class="filterinner">\
                            <label><a href="javascript:void(0);" data-url="'+msg[i].href+'" class="'+clsss+'">'+msg[i].name+'</a></label>\
                        </li>';}}}else{html='';}
html+=li;html+='</ul>\
                    </span>\
                </li>';if(li!=''){$('.ajaxFilterResult').append(html);}}else return;});}
function setCookie(cname,cvalue,exdays){var d=new Date();d.setTime(d.getTime()+(exdays*24*60*60*1000));var expires="expires="+d.toUTCString();document.cookie=cname+"="+cvalue+";"+expires+";path=/";}
function getCookie(cname){var name=cname+"=";var decodedCookie=decodeURIComponent(document.cookie);var ca=decodedCookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' '){c=c.substring(1);}
if(c.indexOf(name)==0){return c.substring(name.length,c.length);}}
return "";}
(function(window,$,undefined){$.infinitescroll=function infscr(options,callback,element){this.element=$(element);this._create(options,callback);};$.infinitescroll.defaults={loading:{finished:undefined,finishedMsg:"<em>Congratulations, you've reached the end of the page.</em>",img:"http://www.infinite-scroll.com/loading.gif",msg:null,msgText:"<em>Loading the next set of product...</em>",selector:null,speed:'fast',start:undefined},state:{isDuringAjax:false,isInvalidPage:false,isDestroyed:false,isDone:false,isPaused:false,currPage:1},callback:undefined,debug:false,behavior:undefined,binder:$(window),nextSelector:"div.navigation a:first",navSelector:"div.navigation",contentSelector:null,extraScrollPx:150,itemSelector:"div.post",animate:false,pathParse:undefined,dataType:'html',appendCallback:true,bufferPx:40,errorCallback:function(){},infid:0,pixelsFromNavToBottom:undefined,path:undefined};$.infinitescroll.prototype={_binding:function infscr_binding(binding){var instance=this,opts=instance.options;if(!!opts.behavior&&this['_binding_'+opts.behavior]!==undefined){this['_binding_'+opts.behavior].call(this);return;}
if(binding!=='bind'&&binding!=='unbind'){this._debug('Binding value  '+binding+' not valid')
return false;}
if(binding=='unbind'){(this.options.binder).unbind('smartscroll.infscr.'+instance.options.infid);}else{(this.options.binder)[binding]('smartscroll.infscr.'+instance.options.infid,function(){instance.scroll();});};this._debug('Binding',binding);},_create:function infscr_create(options,callback){if(!this._validate(options)){return false;}
var opts=this.options=$.extend(true,{},$.infinitescroll.defaults,options),relurl=/(.*?\/\/).*?(\/.*)/,path=$(opts.nextSelector).attr('href');opts.contentSelector=opts.contentSelector||this.element;opts.loading.selector=opts.loading.selector||opts.contentSelector;if(!path){this._debug('Navigation selector not found');return;}
opts.path=this._determinepath(path);opts.loading.msg=$('<div id="infscr-loading"><img alt="Loading..." src="'+opts.loading.img+'" /><div>'+opts.loading.msgText+'</div></div>');(new Image()).src=opts.loading.img;opts.pixelsFromNavToBottom=$(document).height()-$(opts.navSelector).offset().top;opts.loading.start=opts.loading.start||function(){$(opts.navSelector).hide();opts.loading.msg.appendTo(opts.loading.selector).show(opts.loading.speed,function(){beginAjax(opts);});};opts.loading.finished=opts.loading.finished||function(){opts.loading.msg.fadeOut('normal');};opts.callback=function(instance,data){if(!!opts.behavior&&instance['_callback_'+opts.behavior]!==undefined){instance['_callback_'+opts.behavior].call($(opts.contentSelector)[0],data);}
if(callback){callback.call($(opts.contentSelector)[0],data);}};this._setup();},_debug:function infscr_debug(){if(this.options.debug){return window.console&&console.log.call(console,arguments);}},_determinepath:function infscr_determinepath(path){var opts=this.options;if(!!opts.behavior&&this['_determinepath_'+opts.behavior]!==undefined){this['_determinepath_'+opts.behavior].call(this,path);return;}
if(!!opts.pathParse){this._debug('pathParse manual');return opts.pathParse;}else if(path.match(/^(.*?)\b2\b(.*?$)/)){path=path.match(/^(.*?)\b2\b(.*?$)/).slice(1);}else if(path.match(/^(.*?)2(.*?$)/)){if(path.match(/^(.*?page=)2(\/.*|$)/)){path=path.match(/^(.*?page=)2(\/.*|$)/).slice(1);return path;}
path=path.match(/^(.*?)2(.*?$)/).slice(1);}else{if(path.match(/^(.*?page=)1(\/.*|$)/)){path=path.match(/^(.*?page=)1(\/.*|$)/).slice(1);return path;}else{this._debug('Sorry, we couldn\'t parse your Next (Previous Posts) URL. Verify your the css selector points to the correct A tag. If you still get this error: yell, scream, and kindly ask for help at infinite-scroll.com.');opts.state.isInvalidPage=true;}}
this._debug('determinePath',path);return path;},_error:function infscr_error(xhr){var opts=this.options;if(!!opts.behavior&&this['_error_'+opts.behavior]!==undefined){this['_error_'+opts.behavior].call(this,xhr);return;}
if(xhr!=='destroy'&&xhr!=='end'){xhr='unknown';}
this._debug('Error',xhr);if(xhr=='end'){this._showdonemsg();}
opts.state.isDone=true;opts.state.currPage=1;opts.state.isPaused=false;this._binding('unbind');},_loadcallback:function infscr_loadcallback(box,data){var opts=this.options,callback=this.options.callback,result=(opts.state.isDone)?'done':(!opts.appendCallback)?'no-append':'append',frag;if(!!opts.behavior&&this['_loadcallback_'+opts.behavior]!==undefined){this['_loadcallback_'+opts.behavior].call(this,box,data);return;}
switch(result){case 'done':this._showdonemsg();return false;break;case 'no-append':if(opts.dataType=='html'){data='<div>'+data+'</div>';data=$(data).find(opts.itemSelector);};break;case 'append':var children=box.children();if(children.length==0){return this._error('end');}
frag=document.createDocumentFragment();while(box[0].firstChild){frag.appendChild(box[0].firstChild);}
this._debug('contentSelector',$(opts.contentSelector)[0])
$(opts.contentSelector)[0].appendChild(frag);data=children.get();break;}
opts.loading.finished.call($(opts.contentSelector)[0],opts)
if(opts.animate){var scrollTo=$(window).scrollTop()+$('#infscr-loading').height()+opts.extraScrollPx+'px';$('html,body').animate({scrollTop:scrollTo},800,function(){opts.state.isDuringAjax=false;});}
if(!opts.animate)opts.state.isDuringAjax=false;callback(this,data);},_nearbottom:function infscr_nearbottom(){var opts=this.options,pixelsFromWindowBottomToBottom=0+$(document).height()-(opts.binder.scrollTop())-$(window).height();if(!!opts.behavior&&this['_nearbottom_'+opts.behavior]!==undefined){this['_nearbottom_'+opts.behavior].call(this);return;}
this._debug('math:',pixelsFromWindowBottomToBottom,opts.pixelsFromNavToBottom);return(pixelsFromWindowBottomToBottom-opts.bufferPx<opts.pixelsFromNavToBottom);},_pausing:function infscr_pausing(pause){var opts=this.options;if(!!opts.behavior&&this['_pausing_'+opts.behavior]!==undefined){this['_pausing_'+opts.behavior].call(this,pause);return;}
if(pause!=='pause'&&pause!=='resume'&&pause!==null){this._debug('Invalid argument. Toggling pause value instead');};pause=(pause&&(pause=='pause'||pause=='resume'))?pause:'toggle';switch(pause){case 'pause':opts.state.isPaused=true;break;case 'resume':opts.state.isPaused=false;break;case 'toggle':opts.state.isPaused=!opts.state.isPaused;break;}
this._debug('Paused',opts.state.isPaused);return false;},_setup:function infscr_setup(){var opts=this.options;if(!!opts.behavior&&this['_setup_'+opts.behavior]!==undefined){this['_setup_'+opts.behavior].call(this);return;}
this._binding('bind');return false;},_showdonemsg:function infscr_showdonemsg(){var opts=this.options;if(!!opts.behavior&&this['_showdonemsg_'+opts.behavior]!==undefined){this['_showdonemsg_'+opts.behavior].call(this);return;}
opts.loading.msg.find('img').hide().parent().find('div').html(opts.loading.finishedMsg).animate({opacity:1},2000,function(){$(this).parent().fadeOut('normal');});opts.errorCallback.call($(opts.contentSelector)[0],'done');},_validate:function infscr_validate(opts){for(var key in opts){if(key.indexOf&&key.indexOf('Selector')>-1&&$(opts[key]).length===0){this._debug('Your '+key+' found no elements.');return false;}
return true;}},bind:function infscr_bind(){this._binding('bind');},destroy:function infscr_destroy(){this.options.state.isDestroyed=true;return this._error('destroy');},pause:function infscr_pause(){this._pausing('pause');},resume:function infscr_resume(){this._pausing('resume');},retrieve:function infscr_retrieve(pageNum){var instance=this,opts=instance.options,path=opts.path,box,frag,desturl,method,condition,pageNum=pageNum||null,getPage=(!!pageNum)?pageNum:opts.state.currPage;beginAjax=function infscr_ajax(opts){opts.state.currPage++;instance._debug('heading into ajax',path);box=$(opts.contentSelector).is('table')?$('<tbody/>'):$('<div/>');desturl=path.join(opts.state.currPage);method=(opts.dataType=='html'||opts.dataType=='json')?opts.dataType:'html+callback';if(opts.appendCallback&&opts.dataType=='html')method+='+callback'
switch(method){case 'html+callback':instance._debug('Using HTML via .load() method');box.load(desturl+' '+opts.itemSelector,null,function infscr_ajax_callback(responseText){instance._loadcallback(box,responseText);});break;case 'html':case 'json':instance._debug('Using '+(method.toUpperCase())+' via $.ajax() method');$.ajax({url:desturl,dataType:opts.dataType,complete:function infscr_ajax_callback(jqXHR,textStatus){condition=(typeof(jqXHR.isResolved)!=='undefined')?(jqXHR.isResolved()):(textStatus==="success"||textStatus==="notmodified");(condition)?instance._loadcallback(box,jqXHR.responseText):instance._error('end');}});break;}};if(!!opts.behavior&&this['retrieve_'+opts.behavior]!==undefined){this['retrieve_'+opts.behavior].call(this,pageNum);return;}
if(opts.state.isDestroyed){this._debug('Instance is destroyed');return false;};opts.state.isDuringAjax=true;opts.loading.start.call($(opts.contentSelector)[0],opts);},scroll:function infscr_scroll(){var opts=this.options,state=opts.state;if(!!opts.behavior&&this['scroll_'+opts.behavior]!==undefined){this['scroll_'+opts.behavior].call(this);return;}
if(state.isDuringAjax||state.isInvalidPage||state.isDone||state.isDestroyed||state.isPaused)return;if(!this._nearbottom())return;this.retrieve();},toggle:function infscr_toggle(){this._pausing();},unbind:function infscr_unbind(){this._binding('unbind');},update:function infscr_options(key){if($.isPlainObject(key)){this.options=$.extend(true,this.options,key);}}}
$.fn.infinitescroll=function infscr_init(options,callback){var thisCall=typeof options;switch(thisCall){case 'string':var args=Array.prototype.slice.call(arguments,1);this.each(function(){var instance=$.data(this,'infinitescroll');if(!instance){return false;}
if(!$.isFunction(instance[options])||options.charAt(0)==="_"){return false;}
instance[options].apply(instance,args);});break;case 'object':this.each(function(){var instance=$.data(this,'infinitescroll');if(instance){instance.update(options);}else{$.data(this,'infinitescroll',new $.infinitescroll(options,callback,this));}});break;}
return this;};var event=$.event,scrollTimeout;event.special.smartscroll={setup:function(){$(this).bind("scroll",event.special.smartscroll.handler);},teardown:function(){$(this).unbind("scroll",event.special.smartscroll.handler);},handler:function(event,execAsap){var context=this,args=arguments;event.type="smartscroll";if(scrollTimeout){clearTimeout(scrollTimeout);}
scrollTimeout=setTimeout(function(){$.event.dispatch.apply(context,args);},execAsap==="execAsap"?0:100);}};$.fn.smartscroll=function(fn){return fn?this.bind("smartscroll",fn):this.trigger("smartscroll",["execAsap"]);};})(window,jQuery);$(document).on('click','.by-brand',function(e){if(isMob){e.preventDefault();$(e.target).attr('data-url')&&(location.href=$(e.target).attr('data-url'))}})